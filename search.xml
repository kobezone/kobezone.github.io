<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title><![CDATA[ES6编程规范]]></title>
      <url>/blog/2017/07/20/ES6%E7%BC%96%E7%A8%8B%E8%A7%84%E8%8C%83/</url>
      <content type="html"><![CDATA[<h1 id="ECMAScript-6-Style-Guide"><a href="#ECMAScript-6-Style-Guide" class="headerlink" title="ECMAScript 6 Style Guide"></a>ECMAScript 6 Style Guide</h1><p><strong>用更合理的方式写 JavaScript</strong></p>
<p>参考自 <a href="https://github.com/airbnb/javascript" target="_blank" rel="external">Airbnb JavaScript Style Guide</a> 。</p>
<p><a name="table-of-contents"></a></p>
<h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><ol>
<li><a href="#types">类型</a></li>
<li><a href="#references">引用</a></li>
<li><a href="#objects">对象</a></li>
<li><a href="#arrays">数组</a></li>
<li><a href="#destructuring">解构</a></li>
<li><a href="#strings">字符串</a></li>
<li><a href="#functions">函数</a></li>
<li><a href="#arrow-functions">箭头函数</a></li>
<li><a href="#constructors">构造函数</a></li>
<li><a href="#modules">模块</a></li>
<li><a href="#iterators-and-generators">Iterators &amp; Generators </a></li>
<li><a href="#properties">属性</a></li>
<li><a href="#variables">变量</a></li>
<li><a href="#hoisting">提升</a></li>
<li><a href="#comparison-operators--equality">比较运算符 &amp; 等号</a></li>
<li><a href="#blocks">代码块</a></li>
<li><a href="#comments">注释</a></li>
<li><a href="#whitespace">空白</a></li>
<li><a href="#commas">逗号</a></li>
<li><a href="#semicolons">分号</a></li>
<li><a href="#type-casting--coercion">类型转换</a></li>
<li><a href="#naming-conventions">命名规则</a></li>
<li><a href="#accessors">存取器</a></li>
<li><a href="#events">事件</a></li>
<li><a href="#jquery">jQuery</a></li>
<li><a href="#ecmascript-5-compatibility">ECMAScript 5 兼容性</a></li>
<li><a href="#ecmascript-6-styles">ECMAScript 6 编码规范</a></li>
<li><a href="#testing">测试</a></li>
<li><a href="#performance">性能</a></li>
<li><a href="#resources">资源</a></li>
<li><a href="#in-the-wild">使用人群</a></li>
<li><a href="#translation">翻译</a></li>
<li><a href="#the-javascript-style-guide-guide">JavaScript 编码规范说明</a></li>
<li><a href="#chat-with-us-about-javascript">一起来讨论 JavaScript</a></li>
<li><a href="#contributors">Contributors</a></li>
<li><a href="#license">License</a></li>
</ol>
<p><a name="types"></a></p>
<h2 id="类型"><a href="#类型" class="headerlink" title="类型"></a>类型</h2><ul>
<li><p><a href="#1.1">1.1</a> <a name="1.1"></a> <strong>基本类型</strong>: 直接存取基本类型。</p>
<ul>
<li><code>字符串</code></li>
<li><code>数值</code></li>
<li><code>布尔类型</code></li>
<li><code>null</code></li>
<li><code>undefined</code></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> foo = <span class="number">1</span>;</div><div class="line"><span class="keyword">let</span> bar = foo;</div><div class="line"></div><div class="line">bar = <span class="number">9</span>;</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(foo, bar); <span class="comment">// =&gt; 1, 9</span></div></pre></td></tr></table></figure>
</li>
<li><p><a href="#1.2">1.2</a> <a name="1.2"></a> <strong>复制类型</strong>: 通过引用的方式存取复杂类型。</p>
<ul>
<li><code>对象</code></li>
<li><code>数组</code></li>
<li><code>函数</code></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> foo = [<span class="number">1</span>, <span class="number">2</span>];</div><div class="line"><span class="keyword">const</span> bar = foo;</div><div class="line"></div><div class="line">bar[<span class="number">0</span>] = <span class="number">9</span>;</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(foo[<span class="number">0</span>], bar[<span class="number">0</span>]); <span class="comment">// =&gt; 9, 9</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<p><a name="references"></a></p>
<h2 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h2><ul>
<li><p><a href="#2.1">2.1</a> <a name="2.1"></a> 对所有的引用使用 <code>const</code> ；不要使用 <code>var</code>。</p>
<blockquote>
<p>为什么？这能确保你无法对引用重新赋值，也不会导致出现 bug 或难以理解。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</div><div class="line"><span class="keyword">var</span> b = <span class="number">2</span>;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> a = <span class="number">1</span>;</div><div class="line"><span class="keyword">const</span> b = <span class="number">2</span>;</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#2.2">2.2</a> <a name="2.2"></a> 如果你一定需要可变动的引用，使用 <code>let</code> 代替 <code>var</code>。</p>
<blockquote>
<p>为什么？因为  <code>let</code> 是块级作用域，而 <code>var</code> 是函数作用域。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">var</span> count = <span class="number">1</span>;</div><div class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</div><div class="line">  count += <span class="number">1</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good, use the let.</span></div><div class="line"><span class="keyword">let</span> count = <span class="number">1</span>;</div><div class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</div><div class="line">  count += <span class="number">1</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#2.3">2.3</a> <a name="2.3"></a> 注意 <code>let</code> 和 <code>const</code> 都是块级作用域。</p>
</li>
</ul>
<ul>
<li><strong>在一个作用域内不能重复声明</strong> </li>
<li><p><code>const</code>在声明的时候必须初始化 <code>let</code>在声明的时候可以不用初始化</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// const 和 let 只存在于它们被定义的区块内。</span></div><div class="line">&#123;</div><div class="line">  <span class="keyword">let</span> a = <span class="number">1</span>;</div><div class="line">  <span class="keyword">const</span> b = <span class="number">1</span>;</div><div class="line">  <span class="comment">// error</span></div><div class="line">  <span class="keyword">let</span> a = <span class="number">2</span>;</div><div class="line">  <span class="comment">// error</span></div><div class="line">  <span class="keyword">const</span> b ;</div><div class="line">  <span class="keyword">const</span> b = <span class="number">3</span>;</div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.log(a); <span class="comment">// ReferenceError</span></div><div class="line"><span class="built_in">console</span>.log(b); <span class="comment">// ReferenceError</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<p><a name="objects"></a></p>
<h2 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h2><ul>
<li><p><a href="#3.1">3.1</a> <a name="3.1"></a> 使用字面值创建对象。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> item = <span class="keyword">new</span> <span class="built_in">Object</span>();</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> item = &#123;&#125;;</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#3.2">3.2</a> <a name="3.2"></a> 如果你的代码在浏览器环境下执行，别使用 <a href="http://es5.github.io/#x7.6.1" target="_blank" rel="external">保留字</a> 作为键值。这样的话在 IE8 不会运行。 <a href="https://github.com/airbnb/javascript/issues/61" target="_blank" rel="external">更多信息</a>。 但在 ES6 模块和服务器端中使用没有问题。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> superman = &#123;</div><div class="line">  <span class="attr">default</span>: &#123; <span class="attr">clark</span>: <span class="string">'kent'</span> &#125;,</div><div class="line">  <span class="attr">private</span>: <span class="literal">true</span>,</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> superman = &#123;</div><div class="line">  <span class="attr">defaults</span>: &#123; <span class="attr">clark</span>: <span class="string">'kent'</span> &#125;,</div><div class="line">  <span class="attr">hidden</span>: <span class="literal">true</span>,</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#3.3">3.3</a> <a name="3.3"></a> 使用同义词替换需要使用的保留字。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> superman = &#123;</div><div class="line">  <span class="attr">class</span>: <span class="string">'alien'</span>,</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> superman = &#123;</div><div class="line">  <span class="attr">klass</span>: <span class="string">'alien'</span>,</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> superman = &#123;</div><div class="line">  <span class="attr">type</span>: <span class="string">'alien'</span>,</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p><a name="es6-computed-properties"></a></p>
</li>
<li><p><a href="#3.4">3.4</a> <a name="3.4"></a> 创建有动态属性名的对象时，使用可被计算的属性名称。</p>
<blockquote>
<p>为什么？因为这样可以让你在一个地方定义所有的对象属性。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getKey</span>(<span class="params">k</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="string">`a key named <span class="subst">$&#123;k&#125;</span>`</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> obj = &#123;</div><div class="line">  <span class="attr">id</span>: <span class="number">5</span>,</div><div class="line">  <span class="attr">name</span>: <span class="string">'San Francisco'</span>,</div><div class="line">&#125;;</div><div class="line">obj[getKey(<span class="string">'enabled'</span>)] = <span class="literal">true</span>;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> obj = &#123;</div><div class="line">  <span class="attr">id</span>: <span class="number">5</span>,</div><div class="line">  <span class="attr">name</span>: <span class="string">'San Francisco'</span>,</div><div class="line">  [getKey(<span class="string">'enabled'</span>)]: <span class="literal">true</span>,</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p><a name="es6-object-shorthand"></a></p>
</li>
<li><p><a href="#3.5">3.5</a> <a name="3.5"></a> 使用对象方法的简写。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> atom = &#123;</div><div class="line">  <span class="attr">value</span>: <span class="number">1</span>,</div><div class="line"></div><div class="line">  <span class="attr">addValue</span>: <span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> atom.value + value;</div><div class="line">  &#125;,</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> atom = &#123;</div><div class="line">  <span class="attr">value</span>: <span class="number">1</span>,</div><div class="line"></div><div class="line">  addValue(value) &#123;</div><div class="line">    <span class="keyword">return</span> atom.value + value;</div><div class="line">  &#125;,</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p><a name="es6-object-concise"></a></p>
</li>
<li><p><a href="#3.6">3.6</a> <a name="3.6"></a> 使用对象属性值的简写。</p>
<blockquote>
<p>为什么？因为这样更短更有描述性。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> lukeSkywalker = <span class="string">'Luke Skywalker'</span>;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> obj = &#123;</div><div class="line">  <span class="attr">lukeSkywalker</span>: lukeSkywalker,</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> obj = &#123;</div><div class="line">  lukeSkywalker,</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#3.7">3.7</a> <a name="3.7"></a> 在对象属性声明前把简写的属性分组。</p>
<blockquote>
<p>为什么？因为这样能清楚地看出哪些属性使用了简写。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> anakinSkywalker = <span class="string">'Anakin Skywalker'</span>;</div><div class="line"><span class="keyword">const</span> lukeSkywalker = <span class="string">'Luke Skywalker'</span>;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> obj = &#123;</div><div class="line">  <span class="attr">episodeOne</span>: <span class="number">1</span>,</div><div class="line">  <span class="attr">twoJedisWalkIntoACantina</span>: <span class="number">2</span>,</div><div class="line">  lukeSkywalker,</div><div class="line">  <span class="attr">episodeThree</span>: <span class="number">3</span>,</div><div class="line">  <span class="attr">mayTheFourth</span>: <span class="number">4</span>,</div><div class="line">  anakinSkywalker,</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> obj = &#123;</div><div class="line">  lukeSkywalker,</div><div class="line">  anakinSkywalker,</div><div class="line">  <span class="attr">episodeOne</span>: <span class="number">1</span>,</div><div class="line">  <span class="attr">twoJedisWalkIntoACantina</span>: <span class="number">2</span>,</div><div class="line">  <span class="attr">episodeThree</span>: <span class="number">3</span>,</div><div class="line">  <span class="attr">mayTheFourth</span>: <span class="number">4</span>,</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<p><a name="arrays"></a></p>
<h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><ul>
<li><p><a href="#4.1">4.1</a> <a name="4.1"></a> 使用字面值创建数组。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> items = <span class="keyword">new</span> <span class="built_in">Array</span>();</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> items = [];</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#4.2">4.2</a> <a name="4.2"></a> 向数组添加元素时使用 Arrary#push 替代直接赋值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> someStack = [];</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line">someStack[someStack.length] = <span class="string">'abracadabra'</span>;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line">someStack.push(<span class="string">'abracadabra'</span>);</div></pre></td></tr></table></figure>
<p><a name="es6-array-spreads"></a></p>
</li>
<li><p><a href="#4.3">4.3</a> <a name="4.3"></a> 使用拓展运算符 <code>...</code> 复制数组。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> len = items.length;</div><div class="line"><span class="keyword">const</span> itemsCopy = [];</div><div class="line"><span class="keyword">let</span> i;</div><div class="line"></div><div class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; len; i++) &#123;</div><div class="line">  itemsCopy[i] = items[i];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> itemsCopy = [...items];</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#4.4">4.4</a> <a name="4.4"></a> 使用 Array#from 把一个类数组对象转换成数组。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> foo = <span class="built_in">document</span>.querySelectorAll(<span class="string">'.foo'</span>);</div><div class="line"><span class="keyword">const</span> nodes = <span class="built_in">Array</span>.from(foo);</div></pre></td></tr></table></figure>
</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<p><a name="destructuring"></a></p>
<h2 id="解构"><a href="#解构" class="headerlink" title="解构"></a>解构</h2><ul>
<li><p><a href="#5.1">5.1</a> <a name="5.1"></a> 使用解构存取和使用多属性对象。</p>
<blockquote>
<p>为什么？因为解构能减少临时引用属性。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getFullName</span>(<span class="params">user</span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> firstName = user.firstName;</div><div class="line">  <span class="keyword">const</span> lastName = user.lastName;</div><div class="line"></div><div class="line">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;firstName&#125;</span> <span class="subst">$&#123;lastName&#125;</span>`</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getFullName</span>(<span class="params">obj</span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> &#123; firstName, lastName &#125; = obj;</div><div class="line">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;firstName&#125;</span> <span class="subst">$&#123;lastName&#125;</span>`</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// best</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getFullName</span>(<span class="params">&#123; firstName, lastName &#125;</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;firstName&#125;</span> <span class="subst">$&#123;lastName&#125;</span>`</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#5.2">5.2</a> <a name="5.2"></a> 对数组使用解构赋值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> first = arr[<span class="number">0</span>];</div><div class="line"><span class="keyword">const</span> second = arr[<span class="number">1</span>];</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> [first, second] = arr;</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#5.3">5.3</a> <a name="5.3"></a> 需要回传多个值时，使用对象解构，而不是数组解构。</p>
<blockquote>
<p>为什么？增加属性或者改变排序不会改变调用时的位置。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">processInput</span>(<span class="params">input</span>) </span>&#123;</div><div class="line">  <span class="comment">// then a miracle occurs</span></div><div class="line">  <span class="keyword">return</span> [left, right, top, bottom];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 调用时需要考虑回调数据的顺序。</span></div><div class="line"><span class="keyword">const</span> [left, __, top] = processInput(input);</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">processInput</span>(<span class="params">input</span>) </span>&#123;</div><div class="line">  <span class="comment">// then a miracle occurs</span></div><div class="line">  <span class="keyword">return</span> &#123; left, right, top, bottom &#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 调用时只选择需要的数据</span></div><div class="line"><span class="keyword">const</span> &#123; left, right &#125; = processInput(input);</div></pre></td></tr></table></figure>
</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<p><a name="strings"></a></p>
<h2 id="Strings"><a href="#Strings" class="headerlink" title="Strings"></a>Strings</h2><ul>
<li><p><a href="#6.1">6.1</a> <a name="6.1"></a> 字符串使用单引号 <code>&#39;&#39;</code> 。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> name = <span class="string">"Capt. Janeway"</span>;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> name = <span class="string">'Capt. Janeway'</span>;</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#6.2">6.2</a> <a name="6.2"></a> 字符串超过 80 个字节应该使用字符串连接号换行。</p>
</li>
<li><p><a href="#6.3">6.3</a> <a name="6.3"></a> 注：过度使用字串连接符号可能会对性能造成影响。<a href="http://jsperf.com/ya-string-concat" target="_blank" rel="external">jsPerf</a> 和 <a href="https://github.com/airbnb/javascript/issues/40" target="_blank" rel="external">讨论</a>.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> errorMessage = <span class="string">'This is a super long error that was thrown because of Batman. When you stop to think about how Batman had anything to do with this, you would get nowhere fast.'</span>;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> errorMessage = <span class="string">'This is a super long error that was thrown because \</span></div><div class="line">of Batman. When you stop to think about how Batman had anything to do \</div><div class="line">with this, you would get nowhere \</div><div class="line">fast.';</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> errorMessage = <span class="string">'This is a super long error that was thrown because '</span> +</div><div class="line">  <span class="string">'of Batman. When you stop to think about how Batman had anything to do '</span> +</div><div class="line">  <span class="string">'with this, you would get nowhere fast.'</span>;</div></pre></td></tr></table></figure>
<p><a name="es6-template-literals"></a></p>
</li>
<li><p><a href="#6.4">6.4</a> <a name="6.4"></a> 程序化生成字符串时，使用模板字符串代替字符串连接。</p>
<blockquote>
<p>为什么？模板字符串更为简洁，更具可读性。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHi</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="string">'How are you, '</span> + name + <span class="string">'?'</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHi</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> [<span class="string">'How are you, '</span>, name, <span class="string">'?'</span>].join();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHi</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="string">`How are you, <span class="subst">$&#123;name&#125;</span>?`</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<p><a name="functions"></a></p>
<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><ul>
<li><p><a href="#7.1">7.1</a> <a name="7.1"></a> 使用函数声明代替函数表达式。</p>
<blockquote>
<p>为什么？因为函数声明是可命名的，所以他们在调用栈中更容易被识别。此外，函数声明会把整个函数提升（hoisted），而函数表达式只会把函数的引用变量名提升。这条规则使得<a href="#arrow-functions">箭头函数</a>可以取代函数表达式。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> foo = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#7.2">7.2</a> <a name="7.2"></a> 函数表达式:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 立即调用的函数表达式 (IIFE)</span></div><div class="line">(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'Welcome to the Internet. Please follow me.'</span>);</div><div class="line">&#125;)();</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#7.3">7.3</a> <a name="7.3"></a> 永远不要在一个非函数代码块（<code>if</code>、<code>while</code> 等）中声明一个函数，把那个函数赋给一个变量。浏览器允许你这么做，但它们的解析表现不一致。</p>
</li>
<li><p><a href="#7.4">7.4</a> <a name="7.4"></a> <strong>注意:</strong> ECMA-262 把 <code>block</code> 定义为一组语句。函数声明不是语句。<a href="http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf#page=97" target="_blank" rel="external">阅读 ECMA-262 关于这个问题的说明</a>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">if</span> (currentUser) &#123;</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'Nope.'</span>);</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">let</span> test;</div><div class="line"><span class="keyword">if</span> (currentUser) &#123;</div><div class="line">  test = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'Yup.'</span>);</div><div class="line">  &#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#7.5">7.5</a> <a name="7.5"></a> 永远不要把参数命名为 <code>arguments</code>。这将取代原来函数作用域内的 <code>arguments</code> 对象。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">nope</span>(<span class="params">name, options, arguments</span>) </span>&#123;</div><div class="line">  <span class="comment">// ...stuff...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">yup</span>(<span class="params">name, options, args</span>) </span>&#123;</div><div class="line">  <span class="comment">// ...stuff...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><a name="es6-rest"></a></p>
</li>
<li><p><a href="#7.6">7.6</a> <a name="7.6"></a> 不要使用 <code>arguments</code>。可以选择 rest 语法 <code>...</code> 替代。</p>
<blockquote>
<p>为什么？使用 <code>...</code> 能明确你要传入的参数。另外 rest 参数是一个真正的数组，而 <code>arguments</code> 是一个类数组。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">concatenateAll</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> args = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>);</div><div class="line">  <span class="keyword">return</span> args.join(<span class="string">''</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">concatenateAll</span>(<span class="params">...args</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> args.join(<span class="string">''</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><a name="es6-default-parameters"></a></p>
</li>
<li><p><a href="#7.7">7.7</a> <a name="7.7"></a> 直接给函数的参数指定默认值，不要使用一个变化的函数参数。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// really bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleThings</span>(<span class="params">opts</span>) </span>&#123;</div><div class="line">  <span class="comment">// 不！我们不应该改变函数参数。</span></div><div class="line">  <span class="comment">// 更加糟糕: 如果参数 opts 是 false 的话，它就会被设定为一个对象。</span></div><div class="line">  <span class="comment">// 但这样的写法会造成一些 Bugs。</span></div><div class="line">  <span class="comment">//（译注：例如当 opts 被赋值为空字符串，opts 仍然会被下一行代码设定为一个空对象。）</span></div><div class="line">  opts = opts || &#123;&#125;;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// still bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleThings</span>(<span class="params">opts</span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (opts === <span class="keyword">void</span> <span class="number">0</span>) &#123;</div><div class="line">    opts = &#123;&#125;;</div><div class="line">  &#125;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleThings</span>(<span class="params">opts = &#123;&#125;</span>) </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#7.8">7.8</a> <a name="7.8"></a> 直接给函数参数赋值时需要避免副作用。</p>
<blockquote>
<p>为什么？因为这样的写法让人感到很困惑。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> b = <span class="number">1</span>;</div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">count</span>(<span class="params">a = b++</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(a);</div><div class="line">&#125;</div><div class="line">count();  <span class="comment">// 1</span></div><div class="line">count();  <span class="comment">// 2</span></div><div class="line">count(<span class="number">3</span>); <span class="comment">// 3</span></div><div class="line">count();  <span class="comment">// 3</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<p><a name="arrow-functions"></a></p>
<h2 id="箭头函数"><a href="#箭头函数" class="headerlink" title="箭头函数"></a>箭头函数</h2><ul>
<li><p><a href="#8.1">8.1</a> <a name="8.1"></a> 当你必须使用函数表达式（或传递一个匿名函数）时，使用箭头函数符号。</p>
<blockquote>
<p>为什么?因为箭头函数创造了新的一个 <code>this</code> 执行环境（译注：参考 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions" target="_blank" rel="external">Arrow functions - JavaScript | MDN</a> 和 <a href="http://toddmotto.com/es6-arrow-functions-syntaxes-and-lexical-scoping/" target="_blank" rel="external">ES6 arrow functions, syntax and lexical scoping</a>），通常情况下都能满足你的需求，而且这样的写法更为简洁。</p>
<p>为什么不？如果你有一个相当复杂的函数，你或许可以把逻辑部分转移到一个函数声明上。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].map(<span class="function"><span class="keyword">function</span> (<span class="params">x</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> x * x;</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].map(<span class="function">(<span class="params">x</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> x * x;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#8.2">8.2</a> <a name="8.2"></a> 如果一个函数适合用一行写出并且只有一个参数，那就把花括号、圆括号和 <code>return</code> 都省略掉。如果不是，那就不要省略。</p>
<blockquote>
<p>为什么？语法糖。在链式调用中可读性很高。</p>
<p>为什么不？当你打算回传一个对象的时候。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].map(<span class="function"><span class="params">x</span> =&gt;</span> x * x);</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].reduce(<span class="function">(<span class="params">total, n</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> total + n;</div><div class="line">&#125;, <span class="number">0</span>);</div></pre></td></tr></table></figure>
</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<p><a name="constructors"></a></p>
<h2 id="构造器"><a href="#构造器" class="headerlink" title="构造器"></a>构造器</h2><ul>
<li><p><a href="#9.1">9.1</a> <a name="9.1"></a> 总是使用 <code>class</code>。避免直接操作 <code>prototype</code> 。</p>
<blockquote>
<p>为什么? 因为 <code>class</code> 语法更为简洁更易读。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Queue</span>(<span class="params">contents = []</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>._queue = [...contents];</div><div class="line">&#125;</div><div class="line">Queue.prototype.pop = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> value = <span class="keyword">this</span>._queue[<span class="number">0</span>];</div><div class="line">  <span class="keyword">this</span>._queue.splice(<span class="number">0</span>, <span class="number">1</span>);</div><div class="line">  <span class="keyword">return</span> value;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Queue</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(contents = []) &#123;</div><div class="line">    <span class="keyword">this</span>._queue = [...contents];</div><div class="line">  &#125;</div><div class="line">  pop() &#123;</div><div class="line">    <span class="keyword">const</span> value = <span class="keyword">this</span>._queue[<span class="number">0</span>];</div><div class="line">    <span class="keyword">this</span>._queue.splice(<span class="number">0</span>, <span class="number">1</span>);</div><div class="line">    <span class="keyword">return</span> value;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#9.2">9.2</a> <a name="9.2"></a> 使用 <code>extends</code> 继承。</p>
<blockquote>
<p>为什么？因为 <code>extends</code> 是一个内建的原型继承方法并且不会破坏 <code>instanceof</code>。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> inherits = <span class="built_in">require</span>(<span class="string">'inherits'</span>);</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">PeekableQueue</span>(<span class="params">contents</span>) </span>&#123;</div><div class="line">  Queue.apply(<span class="keyword">this</span>, contents);</div><div class="line">&#125;</div><div class="line">inherits(PeekableQueue, Queue);</div><div class="line">PeekableQueue.prototype.peek = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">this</span>._queue[<span class="number">0</span>];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">PeekableQueue</span> <span class="keyword">extends</span> <span class="title">Queue</span> </span>&#123;</div><div class="line">  peek() &#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>._queue[<span class="number">0</span>];</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#9.3">9.3</a> <a name="9.3"></a> 方法可以返回 <code>this</code> 来帮助链式调用。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line">Jedi.prototype.jump = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.jumping = <span class="literal">true</span>;</div><div class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">Jedi.prototype.setHeight = <span class="function"><span class="keyword">function</span>(<span class="params">height</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.height = height;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">const</span> luke = <span class="keyword">new</span> Jedi();</div><div class="line">luke.jump(); <span class="comment">// =&gt; true</span></div><div class="line">luke.setHeight(<span class="number">20</span>); <span class="comment">// =&gt; undefined</span></div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Jedi</span> </span>&#123;</div><div class="line">  jump() &#123;</div><div class="line">    <span class="keyword">this</span>.jumping = <span class="literal">true</span>;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  setHeight(height) &#123;</div><div class="line">    <span class="keyword">this</span>.height = height;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> luke = <span class="keyword">new</span> Jedi();</div><div class="line"></div><div class="line">luke.jump()</div><div class="line">  .setHeight(<span class="number">20</span>);</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#9.4">9.4</a> <a name="9.4"></a> 可以写一个自定义的 <code>toString()</code> 方法，但要确保它能正常运行并且不会引起副作用。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Jedi</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(options = &#123;&#125;) &#123;</div><div class="line">    <span class="keyword">this</span>.name = options.name || <span class="string">'no name'</span>;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  getName() &#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.name;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  toString() &#123;</div><div class="line">    <span class="keyword">return</span> <span class="string">`Jedi - <span class="subst">$&#123;<span class="keyword">this</span>.getName()&#125;</span>`</span>;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<p><a name="modules"></a></p>
<h2 id="模块"><a href="#模块" class="headerlink" title="模块"></a>模块</h2><ul>
<li><p><a href="#10.1">10.1</a> <a name="10.1"></a> 总是使用模组 (<code>import</code>/<code>export</code>) 而不是其他非标准模块系统。你可以编译为你喜欢的模块系统。</p>
<blockquote>
<p>为什么？模块就是未来，让我们开始迈向未来吧。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> AirbnbStyleGuide = <span class="built_in">require</span>(<span class="string">'./AirbnbStyleGuide'</span>);</div><div class="line"><span class="built_in">module</span>.exports = AirbnbStyleGuide.es6;</div><div class="line"></div><div class="line"><span class="comment">// ok</span></div><div class="line"><span class="keyword">import</span> AirbnbStyleGuide <span class="keyword">from</span> <span class="string">'./AirbnbStyleGuide'</span>;</div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> AirbnbStyleGuide.es6;</div><div class="line"></div><div class="line"><span class="comment">// best</span></div><div class="line"><span class="keyword">import</span> &#123; es6 &#125; <span class="keyword">from</span> <span class="string">'./AirbnbStyleGuide'</span>;</div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> es6;</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#10.2">10.2</a> <a name="10.2"></a> 不要使用通配符 import。</p>
<blockquote>
<p>为什么？这样能确保你只有一个默认 export。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">import</span> * <span class="keyword">as</span> AirbnbStyleGuide <span class="keyword">from</span> <span class="string">'./AirbnbStyleGuide'</span>;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">import</span> AirbnbStyleGuide <span class="keyword">from</span> <span class="string">'./AirbnbStyleGuide'</span>;</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#10.3">10.3</a> <a name="10.3"></a>不要从 import 中直接 export。</p>
<blockquote>
<p>为什么？虽然一行代码简洁明了，但让 import 和 export 各司其职让事情能保持一致。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="comment">// filename es6.js</span></div><div class="line"><span class="keyword">export</span> &#123; es6 <span class="keyword">as</span> <span class="keyword">default</span> &#125; <span class="keyword">from</span> <span class="string">'./airbnbStyleGuide'</span>;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="comment">// filename es6.js</span></div><div class="line"><span class="keyword">import</span> &#123; es6 &#125; <span class="keyword">from</span> <span class="string">'./AirbnbStyleGuide'</span>;</div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> es6;</div></pre></td></tr></table></figure>
</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<p><a name="iterators-and-generators"></a></p>
<h2 id="Iterators-and-Generators"><a href="#Iterators-and-Generators" class="headerlink" title="Iterators and Generators"></a>Iterators and Generators</h2><ul>
<li><p><a href="#11.1">11.1</a> <a name="11.1"></a> 不要使用 iterators。使用高阶函数例如 <code>map()</code> 和 <code>reduce()</code> 替代 <code>for-of</code>。</p>
<blockquote>
<p>为什么？这加强了我们不变的规则。处理纯函数的回调值更易读，这比它带来的副作用更重要。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">let</span> sum = <span class="number">0</span>;</div><div class="line"><span class="keyword">for</span> (<span class="keyword">let</span> num <span class="keyword">of</span> numbers) &#123;</div><div class="line">  sum += num;</div><div class="line">&#125;</div><div class="line"></div><div class="line">sum === <span class="number">15</span>;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">let</span> sum = <span class="number">0</span>;</div><div class="line">numbers.forEach(<span class="function">(<span class="params">num</span>) =&gt;</span> sum += num);</div><div class="line">sum === <span class="number">15</span>;</div><div class="line"></div><div class="line"><span class="comment">// best (use the functional force)</span></div><div class="line"><span class="keyword">const</span> sum = numbers.reduce(<span class="function">(<span class="params">total, num</span>) =&gt;</span> total + num, <span class="number">0</span>);</div><div class="line">sum === <span class="number">15</span>;</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#11.2">11.2</a> <a name="11.2"></a> 现在还不要使用 generators。</p>
<blockquote>
<p>为什么？因为它们现在还没法很好地编译到 ES5。 (译者注：目前(2016/03) Chrome 和 Node.js 的稳定版本都已支持 generators)</p>
</blockquote>
</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<p><a name="properties"></a></p>
<h2 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h2><ul>
<li><p><a href="#12.1">12.1</a> <a name="12.1"></a> 使用 <code>.</code> 来访问对象的属性。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> luke = &#123;</div><div class="line">  <span class="attr">jedi</span>: <span class="literal">true</span>,</div><div class="line">  <span class="attr">age</span>: <span class="number">28</span>,</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> isJedi = luke[<span class="string">'jedi'</span>];</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> isJedi = luke.jedi;</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#12.2">12.2</a> <a name="12.2"></a> 当通过变量访问属性时使用中括号 <code>[]</code>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> luke = &#123;</div><div class="line">  <span class="attr">jedi</span>: <span class="literal">true</span>,</div><div class="line">  <span class="attr">age</span>: <span class="number">28</span>,</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getProp</span>(<span class="params">prop</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> luke[prop];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> isJedi = getProp(<span class="string">'jedi'</span>);</div></pre></td></tr></table></figure>
</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<p><a name="variables"></a></p>
<h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><ul>
<li><p><a href="#13.1">13.1</a> <a name="13.1"></a> 一直使用 <code>const</code> 来声明变量，如果不这样做就会产生全局变量。我们需要避免全局命名空间的污染。<a href="http://www.wikiwand.com/en/Captain_Planet" target="_blank" rel="external">地球队长</a>已经警告过我们了。（译注：全局，global 亦有全球的意思。地球队长的责任是保卫地球环境，所以他警告我们不要造成「全球」污染。）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line">superPower = <span class="keyword">new</span> SuperPower();</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> superPower = <span class="keyword">new</span> SuperPower();</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#13.2">13.2</a> <a name="13.2"></a> 使用 <code>const</code> 声明每一个变量。</p>
<blockquote>
<p>为什么？增加新变量将变的更加容易，而且你永远不用再担心调换错 <code>;</code> 跟 <code>,</code>。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> items = getItems(),</div><div class="line">    goSportsTeam = <span class="literal">true</span>,</div><div class="line">    dragonball = <span class="string">'z'</span>;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="comment">// (compare to above, and try to spot the mistake)</span></div><div class="line"><span class="keyword">const</span> items = getItems(),</div><div class="line">    goSportsTeam = <span class="literal">true</span>;</div><div class="line">    dragonball = <span class="string">'z'</span>;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> items = getItems();</div><div class="line"><span class="keyword">const</span> goSportsTeam = <span class="literal">true</span>;</div><div class="line"><span class="keyword">const</span> dragonball = <span class="string">'z'</span>;</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#13.3">13.3</a> <a name="13.3"></a> 将所有的 <code>const</code> 和 <code>let</code> 分组</p>
<blockquote>
<p>为什么？当你需要把已赋值变量赋值给未赋值变量时非常有用。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">let</span> i, len, dragonball,</div><div class="line">    items = getItems(),</div><div class="line">    goSportsTeam = <span class="literal">true</span>;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">let</span> i;</div><div class="line"><span class="keyword">const</span> items = getItems();</div><div class="line"><span class="keyword">let</span> dragonball;</div><div class="line"><span class="keyword">const</span> goSportsTeam = <span class="literal">true</span>;</div><div class="line"><span class="keyword">let</span> len;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> goSportsTeam = <span class="literal">true</span>;</div><div class="line"><span class="keyword">const</span> items = getItems();</div><div class="line"><span class="keyword">let</span> dragonball;</div><div class="line"><span class="keyword">let</span> i;</div><div class="line"><span class="keyword">let</span> length;</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#13.4">13.4</a> <a name="13.4"></a> 在你需要的地方给变量赋值，但请把它们放在一个合理的位置。</p>
<blockquote>
<p>为什么？<code>let</code> 和 <code>const</code> 是块级作用域而不是函数作用域。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  test();</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'doing stuff..'</span>);</div><div class="line"></div><div class="line">  <span class="comment">//..other stuff..</span></div><div class="line"></div><div class="line">  <span class="keyword">const</span> name = getName();</div><div class="line"></div><div class="line">  <span class="keyword">if</span> (name === <span class="string">'test'</span>) &#123;</div><div class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">return</span> name;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad - unnecessary function call</span></div><div class="line"><span class="function"><span class="keyword">function</span>(<span class="params">hasName</span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> name = getName();</div><div class="line"></div><div class="line">  <span class="keyword">if</span> (!hasName) &#123;</div><div class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">this</span>.setFirstName(name);</div><div class="line"></div><div class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="function"><span class="keyword">function</span>(<span class="params">hasName</span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (!hasName) &#123;</div><div class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">const</span> name = getName();</div><div class="line">  <span class="keyword">this</span>.setFirstName(name);</div><div class="line"></div><div class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<p><a name="hoisting"></a></p>
<h2 id="Hoisting"><a href="#Hoisting" class="headerlink" title="Hoisting"></a>Hoisting</h2><ul>
<li><p><a href="#14.1">14.1</a> <a name="14.1"></a> <code>var</code> 声明会被提升至该作用域的顶部，但它们赋值不会提升。<code>let</code> 和 <code>const</code> 被赋予了一种称为「<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/let#Temporal_dead_zone_and_errors_with_let" target="_blank" rel="external">暂时性死区（Temporal Dead Zones, TDZ）</a>」的概念。这对于了解为什么 <a href="http://es-discourse.com/t/why-typeof-is-no-longer-safe/15" target="_blank" rel="external">type of 不再安全</a>相当重要。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 我们知道这样运行不了</span></div><div class="line"><span class="comment">// （假设 notDefined 不是全局变量）</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">example</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(notDefined); <span class="comment">// =&gt; throws a ReferenceError</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 由于变量提升的原因，</span></div><div class="line"><span class="comment">// 在引用变量后再声明变量是可以运行的。</span></div><div class="line"><span class="comment">// 注：变量的赋值 `true` 不会被提升。</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">example</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(declaredButNotAssigned); <span class="comment">// =&gt; undefined</span></div><div class="line">  <span class="keyword">var</span> declaredButNotAssigned = <span class="literal">true</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 编译器会把函数声明提升到作用域的顶层，</span></div><div class="line"><span class="comment">// 这意味着我们的例子可以改写成这样：</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">example</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">let</span> declaredButNotAssigned;</div><div class="line">  <span class="built_in">console</span>.log(declaredButNotAssigned); <span class="comment">// =&gt; undefined</span></div><div class="line">  declaredButNotAssigned = <span class="literal">true</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 使用 const 和 let</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">example</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(declaredButNotAssigned); <span class="comment">// =&gt; throws a ReferenceError</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="keyword">typeof</span> declaredButNotAssigned); <span class="comment">// =&gt; throws a ReferenceError</span></div><div class="line">  <span class="keyword">const</span> declaredButNotAssigned = <span class="literal">true</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#14.2">14.2</a> <a name="14.2"></a> 匿名函数表达式的变量名会被提升，但函数内容并不会。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">example</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(anonymous); <span class="comment">// =&gt; undefined</span></div><div class="line"></div><div class="line">  anonymous(); <span class="comment">// =&gt; TypeError anonymous is not a function</span></div><div class="line"></div><div class="line">  <span class="keyword">var</span> anonymous = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'anonymous function expression'</span>);</div><div class="line">  &#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#14.3">14.3</a> <a name="14.3"></a> 命名的函数表达式的变量名会被提升，但函数名和函数函数内容并不会。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">example</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(named); <span class="comment">// =&gt; undefined</span></div><div class="line"></div><div class="line">  named(); <span class="comment">// =&gt; TypeError named is not a function</span></div><div class="line"></div><div class="line">  superPower(); <span class="comment">// =&gt; ReferenceError superPower is not defined</span></div><div class="line"></div><div class="line">  <span class="keyword">var</span> named = <span class="function"><span class="keyword">function</span> <span class="title">superPower</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'Flying'</span>);</div><div class="line">  &#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// the same is true when the function name</span></div><div class="line"><span class="comment">// is the same as the variable name.</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">example</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(named); <span class="comment">// =&gt; undefined</span></div><div class="line"></div><div class="line">  named(); <span class="comment">// =&gt; TypeError named is not a function</span></div><div class="line"></div><div class="line">  <span class="keyword">var</span> named = <span class="function"><span class="keyword">function</span> <span class="title">named</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'named'</span>);</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#14.4">14.4</a> <a name="14.4"></a> 函数声明的名称和函数体都会被提升。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">example</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  superPower(); <span class="comment">// =&gt; Flying</span></div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">superPower</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'Flying'</span>);</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>想了解更多信息，参考 <a href="http://www.adequatelygood.com/" target="_blank" rel="external">Ben Cherry</a> 的 <a href="http://www.adequatelygood.com/2010/2/JavaScript-Scoping-and-Hoisting" target="_blank" rel="external">JavaScript Scoping &amp; Hoisting</a>。</p>
</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<p><a name="comparison-operators--equality"></a></p>
<h2 id="比较运算符-amp-等号"><a href="#比较运算符-amp-等号" class="headerlink" title="比较运算符 &amp; 等号"></a>比较运算符 &amp; 等号</h2><ul>
<li><a href="#15.1">15.1</a> <a name="15.1"></a> 优先使用 <code>===</code> 和 <code>!==</code> 而不是 <code>==</code> 和 <code>!=</code>.</li>
<li><p><a href="#15.2">15.2</a> <a name="15.2"></a> 条件表达式例如 <code>if</code> 语句通过抽象方法 <code>ToBoolean</code> 强制计算它们的表达式并且总是遵守下面的规则：</p>
<ul>
<li><strong>对象</strong> 被计算为 <strong>true</strong></li>
<li><strong>Undefined</strong> 被计算为 <strong>false</strong></li>
<li><strong>Null</strong> 被计算为 <strong>false</strong></li>
<li><strong>布尔值</strong> 被计算为 <strong>布尔的值</strong></li>
<li><strong>数字</strong> 如果是 <strong>+0、-0、或 NaN</strong> 被计算为 <strong>false</strong>, 否则为 <strong>true</strong></li>
<li><strong>字符串</strong> 如果是空字符串 <code>&#39;&#39;</code> 被计算为 <strong>false</strong>，否则为 <strong>true</strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> ([<span class="number">0</span>]) &#123;</div><div class="line">  <span class="comment">// true</span></div><div class="line">  <span class="comment">// An array is an object, objects evaluate to true</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#15.3">15.3</a> <a name="15.3"></a> 使用简写。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">if</span> (name !== <span class="string">''</span>) &#123;</div><div class="line">  <span class="comment">// ...stuff...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">if</span> (name) &#123;</div><div class="line">  <span class="comment">// ...stuff...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">if</span> (collection.length &gt; <span class="number">0</span>) &#123;</div><div class="line">  <span class="comment">// ...stuff...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">if</span> (collection.length) &#123;</div><div class="line">  <span class="comment">// ...stuff...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#15.4">15.4</a> <a name="15.4"></a> 想了解更多信息，参考 Angus Croll 的 <a href="http://javascriptweblog.wordpress.com/2011/02/07/truth-equality-and-javascript/#more-2108" target="_blank" rel="external">Truth Equality and JavaScript</a>。</p>
</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<p><a name="blocks"></a></p>
<h2 id="代码块"><a href="#代码块" class="headerlink" title="代码块"></a>代码块</h2><ul>
<li><p><a href="#16.1">16.1</a> <a name="16.1"></a> 使用大括号包裹所有的多行代码块。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">if</span> (test)</div><div class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">if</span> (test) <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">if</span> (test) &#123;</div><div class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="literal">false</span>; &#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#16.2">16.2</a> <a name="16.2"></a> 如果通过 <code>if</code> 和 <code>else</code> 使用多行代码块，把 <code>else</code> 放在 <code>if</code> 代码块关闭括号的同一行。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">if</span> (test) &#123;</div><div class="line">  thing1();</div><div class="line">  thing2();</div><div class="line">&#125;</div><div class="line"><span class="keyword">else</span> &#123;</div><div class="line">  thing3();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">if</span> (test) &#123;</div><div class="line">  thing1();</div><div class="line">  thing2();</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">  thing3();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<p><a name="comments"></a></p>
<h2 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h2><ul>
<li><p><a href="#17.1">17.1</a> <a name="17.1"></a> 使用 <code>/** ... */</code> 作为多行注释。包含描述、指定所有参数和返回值的类型和值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="comment">// make() returns a new element</span></div><div class="line"><span class="comment">// based on the passed in tag name</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// @param &#123;String&#125; tag</span></div><div class="line"><span class="comment">// @return &#123;Element&#125; element</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">make</span>(<span class="params">tag</span>) </span>&#123;</div><div class="line"></div><div class="line">  <span class="comment">// ...stuff...</span></div><div class="line"></div><div class="line">  <span class="keyword">return</span> element;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="comment">/**</span></div><div class="line"> * make() returns a new element</div><div class="line"> * based on the passed in tag name</div><div class="line"> *</div><div class="line"> * @param &#123;String&#125; tag</div><div class="line"> * @return &#123;Element&#125; element</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">make</span>(<span class="params">tag</span>) </span>&#123;</div><div class="line"></div><div class="line">  <span class="comment">// ...stuff...</span></div><div class="line"></div><div class="line">  <span class="keyword">return</span> element;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#17.2">17.2</a> <a name="17.2"></a> 使用 <code>//</code> 作为单行注释。在评论对象上面另起一行使用单行注释。在注释前插入空行。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> active = <span class="literal">true</span>;  <span class="comment">// is current tab</span></div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="comment">// is current tab</span></div><div class="line"><span class="keyword">const</span> active = <span class="literal">true</span>;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getType</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'fetching type...'</span>);</div><div class="line">  <span class="comment">// set the default type to 'no type'</span></div><div class="line">  <span class="keyword">const</span> type = <span class="keyword">this</span>._type || <span class="string">'no type'</span>;</div><div class="line"></div><div class="line">  <span class="keyword">return</span> type;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getType</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'fetching type...'</span>);</div><div class="line"></div><div class="line">  <span class="comment">// set the default type to 'no type'</span></div><div class="line">  <span class="keyword">const</span> type = <span class="keyword">this</span>._type || <span class="string">'no type'</span>;</div><div class="line"></div><div class="line">  <span class="keyword">return</span> type;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#17.3">17.3</a> <a name="17.3"></a> 给注释增加 <code>FIXME</code> 或 <code>TODO</code> 的前缀可以帮助其他开发者快速了解这是一个需要复查的问题，或是给需要实现的功能提供一个解决方式。这将有别于常见的注释，因为它们是可操作的。使用 <code>FIXME -- need to figure this out</code> 或者 <code>TODO -- need to implement</code>。</p>
</li>
<li><p><a href="#17.4">17.4</a> <a name="17.4"></a> 使用 <code>// FIXME</code>: 标注问题。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Calculator</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>() &#123;</div><div class="line">    <span class="comment">// <span class="doctag">FIXME:</span> shouldn't use a global here</span></div><div class="line">    total = <span class="number">0</span>;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#17.5">17.5</a> <a name="17.5"></a> 使用 <code>// TODO</code>: 标注问题的解决方式。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Calculator</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>() &#123;</div><div class="line">    <span class="comment">// <span class="doctag">TODO:</span> total should be configurable by an options param</span></div><div class="line">    <span class="keyword">this</span>.total = <span class="number">0</span>;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<p><a name="whitespace"></a></p>
<h2 id="空白"><a href="#空白" class="headerlink" title="空白"></a>空白</h2><ul>
<li><p><a href="#18.1">18.1</a> <a name="18.1"></a> 使用 2 个空格作为缩进。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">∙∙∙∙<span class="keyword">const</span> name;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">∙<span class="keyword">const</span> name;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">∙∙<span class="keyword">const</span> name;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#18.2">18.2</a> <a name="18.2"></a> 在花括号前放一个空格。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'test'</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'test'</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line">dog.set(<span class="string">'attr'</span>,&#123;</div><div class="line">  <span class="attr">age</span>: <span class="string">'1 year'</span>,</div><div class="line">  <span class="attr">breed</span>: <span class="string">'Bernese Mountain Dog'</span>,</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line">dog.set(<span class="string">'attr'</span>, &#123;</div><div class="line">  <span class="attr">age</span>: <span class="string">'1 year'</span>,</div><div class="line">  <span class="attr">breed</span>: <span class="string">'Bernese Mountain Dog'</span>,</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#18.3">18.3</a> <a name="18.3"></a> 在控制语句（<code>if</code>、<code>while</code> 等）的小括号前放一个空格。在函数调用及声明中，不在函数的参数列表前加空格。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">if</span>(isJedi) &#123;</div><div class="line">  fight ();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">if</span> (isJedi) &#123;</div><div class="line">  fight();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">fight</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log (<span class="string">'Swooosh!'</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">fight</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'Swooosh!'</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#18.4">18.4</a> <a name="18.4"></a> 使用空格把运算符隔开。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> x=y+<span class="number">5</span>;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> x = y + <span class="number">5</span>;</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#18.5">18.5</a> <a name="18.5"></a> 在文件末尾插入一个空行。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">global</span>) </span>&#123;</div><div class="line">  <span class="comment">// ...stuff...</span></div><div class="line">&#125;)(<span class="keyword">this</span>);</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">global</span>) </span>&#123;</div><div class="line">  <span class="comment">// ...stuff...</span></div><div class="line">&#125;)(<span class="keyword">this</span>);↵</div><div class="line">↵</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">global</span>) </span>&#123;</div><div class="line">  <span class="comment">// ...stuff...</span></div><div class="line">&#125;)(<span class="keyword">this</span>);↵</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#18.5">18.5</a> <a name="18.5"></a> 在使用长方法链时进行缩进。使用前面的点 <code>.</code> 强调这是方法调用而不是新语句。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line">$(<span class="string">'#items'</span>).find(<span class="string">'.selected'</span>).highlight().end().find(<span class="string">'.open'</span>).updateCount();</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line">$(<span class="string">'#items'</span>).</div><div class="line">  find(<span class="string">'.selected'</span>).</div><div class="line">    highlight().</div><div class="line">    end().</div><div class="line">  find(<span class="string">'.open'</span>).</div><div class="line">    updateCount();</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line">$(<span class="string">'#items'</span>)</div><div class="line">  .find(<span class="string">'.selected'</span>)</div><div class="line">    .highlight()</div><div class="line">    .end()</div><div class="line">  .find(<span class="string">'.open'</span>)</div><div class="line">    .updateCount();</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> leds = stage.selectAll(<span class="string">'.led'</span>).data(data).enter().append(<span class="string">'svg:svg'</span>).class(<span class="string">'led'</span>, <span class="literal">true</span>)</div><div class="line">    .attr(<span class="string">'width'</span>, (radius + margin) * <span class="number">2</span>).append(<span class="string">'svg:g'</span>)</div><div class="line">    .attr(<span class="string">'transform'</span>, <span class="string">'translate('</span> + (radius + margin) + <span class="string">','</span> + (radius + margin) + <span class="string">')'</span>)</div><div class="line">    .call(tron.led);</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> leds = stage.selectAll(<span class="string">'.led'</span>)</div><div class="line">    .data(data)</div><div class="line">  .enter().append(<span class="string">'svg:svg'</span>)</div><div class="line">    .classed(<span class="string">'led'</span>, <span class="literal">true</span>)</div><div class="line">    .attr(<span class="string">'width'</span>, (radius + margin) * <span class="number">2</span>)</div><div class="line">  .append(<span class="string">'svg:g'</span>)</div><div class="line">    .attr(<span class="string">'transform'</span>, <span class="string">'translate('</span> + (radius + margin) + <span class="string">','</span> + (radius + margin) + <span class="string">')'</span>)</div><div class="line">    .call(tron.led);</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#18.6">18.6</a> <a name="18.6"></a> 在块末和新语句前插入空行。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">if</span> (foo) &#123;</div><div class="line">  <span class="keyword">return</span> bar;</div><div class="line">&#125;</div><div class="line"><span class="keyword">return</span> baz;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">if</span> (foo) &#123;</div><div class="line">  <span class="keyword">return</span> bar;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">return</span> baz;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> obj = &#123;</div><div class="line">  foo() &#123;</div><div class="line">  &#125;,</div><div class="line">  bar() &#123;</div><div class="line">  &#125;,</div><div class="line">&#125;;</div><div class="line"><span class="keyword">return</span> obj;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> obj = &#123;</div><div class="line">  foo() &#123;</div><div class="line">  &#125;,</div><div class="line"></div><div class="line">  bar() &#123;</div><div class="line">  &#125;,</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">return</span> obj;</div></pre></td></tr></table></figure>
</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<p><a name="commas"></a></p>
<h2 id="逗号"><a href="#逗号" class="headerlink" title="逗号"></a>逗号</h2><ul>
<li><p><a href="#19.1">19.1</a> <a name="19.1"></a> 行首逗号：<strong>不需要</strong>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> story = [</div><div class="line">    once</div><div class="line">  , upon</div><div class="line">  , aTime</div><div class="line">];</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> story = [</div><div class="line">  once,</div><div class="line">  upon,</div><div class="line">  aTime,</div><div class="line">];</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> hero = &#123;</div><div class="line">    <span class="attr">firstName</span>: <span class="string">'Ada'</span></div><div class="line">  , <span class="attr">lastName</span>: <span class="string">'Lovelace'</span></div><div class="line">  , <span class="attr">birthYear</span>: <span class="number">1815</span></div><div class="line">  , <span class="attr">superPower</span>: <span class="string">'computers'</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> hero = &#123;</div><div class="line">  <span class="attr">firstName</span>: <span class="string">'Ada'</span>,</div><div class="line">  <span class="attr">lastName</span>: <span class="string">'Lovelace'</span>,</div><div class="line">  <span class="attr">birthYear</span>: <span class="number">1815</span>,</div><div class="line">  <span class="attr">superPower</span>: <span class="string">'computers'</span>,</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#19.2">19.2</a> <a name="19.2"></a> 增加结尾的逗号: <strong>需要</strong>。</p>
<blockquote>
<p>为什么? 这会让 git diffs 更干净。另外，像 babel 这样的转译器会移除结尾多余的逗号，也就是说你不必担心老旧浏览器的<a href="es5/README.md#commas">尾逗号问题</a>。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad - git diff without trailing comma</span></div><div class="line"><span class="keyword">const</span> hero = &#123;</div><div class="line">     <span class="attr">firstName</span>: <span class="string">'Florence'</span>,</div><div class="line">-    lastName: <span class="string">'Nightingale'</span></div><div class="line">+    lastName: <span class="string">'Nightingale'</span>,</div><div class="line">+    inventorOf: [<span class="string">'coxcomb graph'</span>, <span class="string">'modern nursing'</span>]</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good - git diff with trailing comma</span></div><div class="line"><span class="keyword">const</span> hero = &#123;</div><div class="line">     <span class="attr">firstName</span>: <span class="string">'Florence'</span>,</div><div class="line">     <span class="attr">lastName</span>: <span class="string">'Nightingale'</span>,</div><div class="line">+    inventorOf: [<span class="string">'coxcomb chart'</span>, <span class="string">'modern nursing'</span>],</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> hero = &#123;</div><div class="line">  <span class="attr">firstName</span>: <span class="string">'Dana'</span>,</div><div class="line">  <span class="attr">lastName</span>: <span class="string">'Scully'</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">const</span> heroes = [</div><div class="line">  <span class="string">'Batman'</span>,</div><div class="line">  <span class="string">'Superman'</span></div><div class="line">];</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> hero = &#123;</div><div class="line">  <span class="attr">firstName</span>: <span class="string">'Dana'</span>,</div><div class="line">  <span class="attr">lastName</span>: <span class="string">'Scully'</span>,</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">const</span> heroes = [</div><div class="line">  <span class="string">'Batman'</span>,</div><div class="line">  <span class="string">'Superman'</span>,</div><div class="line">];</div></pre></td></tr></table></figure>
</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<p><a name="semicolons"></a></p>
<h2 id="分号"><a href="#分号" class="headerlink" title="分号"></a>分号</h2><ul>
<li><p><a href="#20.1">20.1</a> <a name="20.1"></a> <strong>使用分号</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> name = <span class="string">'Skywalker'</span></div><div class="line">  <span class="keyword">return</span> name</div><div class="line">&#125;)()</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line">(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">  <span class="keyword">const</span> name = <span class="string">'Skywalker'</span>;</div><div class="line">  <span class="keyword">return</span> name;</div><div class="line">&#125;)();</div><div class="line"></div><div class="line"><span class="comment">// good (防止函数在两个 IIFE 合并时被当成一个参数)</span></div><div class="line">;<span class="function">(<span class="params">(</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">const</span> name = <span class="string">'Skywalker'</span>;</div><div class="line">  <span class="keyword">return</span> name;</div><div class="line">&#125;)();</div></pre></td></tr></table></figure>
<p><a href="http://stackoverflow.com/a/7365214/1712802" target="_blank" rel="external">Read more</a>.</p>
</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<p><a name="type-casting--coercion"></a></p>
<h2 id="类型转换"><a href="#类型转换" class="headerlink" title="类型转换"></a>类型转换</h2><ul>
<li><a href="#21.1">21.1</a> <a name="21.1"></a> 在语句开始时执行类型转换。</li>
<li><p><a href="#21.2">21.2</a> <a name="21.2"></a> 字符串：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//  =&gt; this.reviewScore = 9;</span></div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> totalScore = <span class="keyword">this</span>.reviewScore + <span class="string">''</span>;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> totalScore = <span class="built_in">String</span>(<span class="keyword">this</span>.reviewScore);</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#21.3">21.3</a> <a name="21.3"></a> 对数字使用 <code>parseInt</code> 转换，并带上类型转换的基数。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> inputValue = <span class="string">'4'</span>;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> val = <span class="keyword">new</span> <span class="built_in">Number</span>(inputValue);</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> val = +inputValue;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> val = inputValue &gt;&gt; <span class="number">0</span>;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> val = <span class="built_in">parseInt</span>(inputValue);</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> val = <span class="built_in">Number</span>(inputValue);</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> val = <span class="built_in">parseInt</span>(inputValue, <span class="number">10</span>);</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#21.4">21.4</a> <a name="21.4"></a> 如果因为某些原因 parseInt 成为你所做的事的瓶颈而需要使用位操作解决<a href="http://jsperf.com/coercion-vs-casting/3" target="_blank" rel="external">性能问题</a>时，留个注释说清楚原因和你的目的。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 使用 parseInt 导致我的程序变慢，</div><div class="line"> * 改成使用位操作转换数字快多了。</div><div class="line"> */</div><div class="line"><span class="keyword">const</span> val = inputValue &gt;&gt; <span class="number">0</span>;</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#21.5">21.5</a> <a name="21.5"></a> <strong>注:</strong> 小心使用位操作运算符。数字会被当成 <a href="http://es5.github.io/#x4.3.19" target="_blank" rel="external">64 位值</a>，但是位操作运算符总是返回 32 位的整数（<a href="http://es5.github.io/#x11.7" target="_blank" rel="external">参考</a>）。位操作处理大于 32 位的整数值时还会导致意料之外的行为。<a href="https://github.com/airbnb/javascript/issues/109" target="_blank" rel="external">关于这个问题的讨论</a>。最大的 32 位整数是 2,147,483,647：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="number">2147483647</span> &gt;&gt; <span class="number">0</span> <span class="comment">//=&gt; 2147483647</span></div><div class="line"><span class="number">2147483648</span> &gt;&gt; <span class="number">0</span> <span class="comment">//=&gt; -2147483648</span></div><div class="line"><span class="number">2147483649</span> &gt;&gt; <span class="number">0</span> <span class="comment">//=&gt; -2147483647</span></div></pre></td></tr></table></figure>
</li>
<li><p><a href="#21.6">21.6</a> <a name="21.6"></a> 布尔:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> age = <span class="number">0</span>;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> hasAge = <span class="keyword">new</span> <span class="built_in">Boolean</span>(age);</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> hasAge = <span class="built_in">Boolean</span>(age);</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> hasAge = !!age;</div></pre></td></tr></table></figure>
</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<p><a name="naming-conventions"></a></p>
<h2 id="命名规则"><a href="#命名规则" class="headerlink" title="命名规则"></a>命名规则</h2><ul>
<li><p><a href="#22.1">22.1</a> <a name="22.1"></a> 避免单字母命名。命名应具备描述性。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">q</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// ...stuff...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">query</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// ..stuff..</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#22.2">22.2</a> <a name="22.2"></a> 使用驼峰式命名对象、函数和实例。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> OBJEcttsssss = &#123;&#125;;</div><div class="line"><span class="keyword">const</span> this_is_my_object = &#123;&#125;;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">c</span>(<span class="params"></span>) </span>&#123;&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> thisIsMyObject = &#123;&#125;;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">thisIsMyFunction</span>(<span class="params"></span>) </span>&#123;&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#22.3">22.3</a> <a name="22.3"></a> 使用帕斯卡式命名构造函数或类。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">user</span>(<span class="params">options</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.name = options.name;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> bad = <span class="keyword">new</span> user(&#123;</div><div class="line">  <span class="attr">name</span>: <span class="string">'nope'</span>,</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(options) &#123;</div><div class="line">    <span class="keyword">this</span>.name = options.name;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> good = <span class="keyword">new</span> User(&#123;</div><div class="line">  <span class="attr">name</span>: <span class="string">'yup'</span>,</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#22.4">22.4</a> <a name="22.4"></a> 使用下划线 <code>_</code> 开头命名私有属性。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">this</span>.__firstName__ = <span class="string">'Panda'</span>;</div><div class="line"><span class="keyword">this</span>.firstName_ = <span class="string">'Panda'</span>;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">this</span>._firstName = <span class="string">'Panda'</span>;</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#22.5">22.5</a> <a name="22.5"></a> 别保存 <code>this</code> 的引用。使用箭头函数或 Function#bind。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> self = <span class="keyword">this</span>;</div><div class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(self);</div><div class="line">  &#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> that = <span class="keyword">this</span>;</div><div class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(that);</div><div class="line">  &#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>);</div><div class="line">  &#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#22.6">22.6</a> <a name="22.6"></a> 如果你的文件只输出一个类，那你的文件名必须和类名完全保持一致。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// file contents</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">CheckBox</span> </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> CheckBox;</div><div class="line"></div><div class="line"><span class="comment">// in some other file</span></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">import</span> CheckBox <span class="keyword">from</span> <span class="string">'./checkBox'</span>;</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">import</span> CheckBox <span class="keyword">from</span> <span class="string">'./check_box'</span>;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">import</span> CheckBox <span class="keyword">from</span> <span class="string">'./CheckBox'</span>;</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#22.7">22.7</a> <a name="22.7"></a> 当你导出默认的函数时使用驼峰式命名。你的文件名必须和函数名完全保持一致。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">makeStyleGuide</span>(<span class="params"></span>) </span>&#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> makeStyleGuide;</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#22.8">22.8</a> <a name="22.8"></a> 当你导出单例、函数库、空对象时使用帕斯卡式命名。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> AirbnbStyleGuide = &#123;</div><div class="line">  <span class="attr">es6</span>: &#123;</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> AirbnbStyleGuide;</div></pre></td></tr></table></figure>
</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<p><a name="accessors"></a></p>
<h2 id="存取器"><a href="#存取器" class="headerlink" title="存取器"></a>存取器</h2><ul>
<li><a href="#23.1">23.1</a> <a name="23.1"></a> 属性的存取函数不是必须的。</li>
<li><p><a href="#23.2">23.2</a> <a name="23.2"></a> 如果你需要存取函数时使用 <code>getVal()</code> 和 <code>setVal(&#39;hello&#39;)</code>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line">dragon.age();</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line">dragon.getAge();</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line">dragon.age(<span class="number">25</span>);</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line">dragon.setAge(<span class="number">25</span>);</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#23.3">23.3</a> <a name="23.3"></a> 如果属性是布尔值，使用 <code>isVal()</code> 或 <code>hasVal()</code>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">if</span> (!dragon.age()) &#123;</div><div class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">if</span> (!dragon.hasAge()) &#123;</div><div class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#23.4">23.4</a> <a name="23.4"></a> 创建 <code>get()</code> 和 <code>set()</code> 函数是可以的，但要保持一致。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Jedi</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(options = &#123;&#125;) &#123;</div><div class="line">    <span class="keyword">const</span> lightsaber = options.lightsaber || <span class="string">'blue'</span>;</div><div class="line">    <span class="keyword">this</span>.set(<span class="string">'lightsaber'</span>, lightsaber);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  set(key, val) &#123;</div><div class="line">    <span class="keyword">this</span>[key] = val;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  get(key) &#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>[key];</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<p><a name="events"></a></p>
<h2 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h2><ul>
<li><p><a href="#24.1">24.1</a> <a name="24.1"></a> 当给事件附加数据时（无论是 DOM 事件还是私有事件），传入一个哈希而不是原始值。这样可以让后面的贡献者增加更多数据到事件数据而无需找出并更新事件的每一个处理器。例如，不好的写法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line">$(<span class="keyword">this</span>).trigger(<span class="string">'listingUpdated'</span>, listing.id);</div><div class="line"></div><div class="line">...</div><div class="line"></div><div class="line">$(<span class="keyword">this</span>).on(<span class="string">'listingUpdated'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e, listingId</span>) </span>&#123;</div><div class="line">  <span class="comment">// do something with listingId</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>更好的写法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// good</span></div><div class="line">$(<span class="keyword">this</span>).trigger(<span class="string">'listingUpdated'</span>, &#123; <span class="attr">listingId</span> : listing.id &#125;);</div><div class="line"></div><div class="line">...</div><div class="line"></div><div class="line">$(<span class="keyword">this</span>).on(<span class="string">'listingUpdated'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e, data</span>) </span>&#123;</div><div class="line">  <span class="comment">// do something with data.listingId</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
</li>
</ul>
<h2 id="jQuery"><a href="#jQuery" class="headerlink" title="jQuery"></a>jQuery</h2><ul>
<li><p><a href="#25.1">25.1</a> <a name="25.1"></a> 使用 <code>$</code> 作为存储 jQuery 对象的变量名前缀。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="keyword">const</span> sidebar = $(<span class="string">'.sidebar'</span>);</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="keyword">const</span> $sidebar = $(<span class="string">'.sidebar'</span>);</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#25.2">25.2</a> <a name="25.2"></a> 缓存 jQuery 查询。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">setSidebar</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  $(<span class="string">'.sidebar'</span>).hide();</div><div class="line"></div><div class="line">  <span class="comment">// ...stuff...</span></div><div class="line"></div><div class="line">  $(<span class="string">'.sidebar'</span>).css(&#123;</div><div class="line">    <span class="string">'background-color'</span>: <span class="string">'pink'</span></div><div class="line">  &#125;);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">setSidebar</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> $sidebar = $(<span class="string">'.sidebar'</span>);</div><div class="line">  $sidebar.hide();</div><div class="line"></div><div class="line">  <span class="comment">// ...stuff...</span></div><div class="line"></div><div class="line">  $sidebar.css(&#123;</div><div class="line">    <span class="string">'background-color'</span>: <span class="string">'pink'</span></div><div class="line">  &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><a href="#25.3">25.3</a> <a name="25.3"></a> 对 DOM 查询使用层叠 <code>$(&#39;.sidebar ul&#39;)</code> 或 父元素 &gt; 子元素 <code>$(&#39;.sidebar &gt; ul&#39;)</code>。 <a href="http://jsperf.com/jquery-find-vs-context-sel/16" target="_blank" rel="external">jsPerf</a></p>
</li>
<li><p><a href="#25.4">25.4</a> <a name="25.4"></a> 对有作用域的 jQuery 对象查询使用 <code>find</code>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bad</span></div><div class="line">$(<span class="string">'ul'</span>, <span class="string">'.sidebar'</span>).hide();</div><div class="line"></div><div class="line"><span class="comment">// bad</span></div><div class="line">$(<span class="string">'.sidebar'</span>).find(<span class="string">'ul'</span>).hide();</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line">$(<span class="string">'.sidebar ul'</span>).hide();</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line">$(<span class="string">'.sidebar &gt; ul'</span>).hide();</div><div class="line"></div><div class="line"><span class="comment">// good</span></div><div class="line">$sidebar.find(<span class="string">'ul'</span>).hide();</div></pre></td></tr></table></figure>
</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<p><a name="ecmascript-5-compatibility"></a></p>
<h2 id="ECMAScript-5-兼容性"><a href="#ECMAScript-5-兼容性" class="headerlink" title="ECMAScript 5 兼容性"></a>ECMAScript 5 兼容性</h2><ul>
<li><a href="#26.1">26.1</a> <a name="26.1"></a> 参考 <a href="https://twitter.com/kangax/" target="_blank" rel="external">Kangax</a> 的 ES5 <a href="http://kangax.github.com/es5-compat-table/" target="_blank" rel="external">兼容性</a>.</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<p><a name="ecmascript-6-styles"></a></p>
<h2 id="ECMAScript-6-规范"><a href="#ECMAScript-6-规范" class="headerlink" title="ECMAScript 6 规范"></a>ECMAScript 6 规范</h2><ul>
<li><a href="#27.1">27.1</a> <a name="27.1"></a> 以下是链接到 ES6 的各个特性的列表。</li>
</ul>
<ol>
<li><a href="#arrow-functions">Arrow Functions</a></li>
<li><a href="#constructors">Classes</a></li>
<li><a href="#es6-object-shorthand">Object Shorthand</a></li>
<li><a href="#es6-object-concise">Object Concise</a></li>
<li><a href="#es6-computed-properties">Object Computed Properties</a></li>
<li><a href="#es6-template-literals">Template Strings</a></li>
<li><a href="#destructuring">Destructuring</a></li>
<li><a href="#es6-default-parameters">Default Parameters</a></li>
<li><a href="#es6-rest">Rest</a></li>
<li><a href="#es6-array-spreads">Array Spreads</a></li>
<li><a href="#references">Let and Const</a></li>
<li><a href="#iterators-and-generators">Iterators and Generators</a></li>
<li><a href="#modules">Modules</a></li>
</ol>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<p><a name="testing"></a></p>
<h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><ul>
<li><p><a href="#28.1">28.1</a> <a name="28.1"></a> <strong>Yup.</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<p><a name="performance"></a></p>
<h2 id="性能"><a href="#性能" class="headerlink" title="性能"></a>性能</h2><ul>
<li><a href="http://kellegous.com/j/2013/01/26/layout-performance/" target="_blank" rel="external">On Layout &amp; Web Performance</a></li>
<li><a href="http://jsperf.com/string-vs-array-concat/2" target="_blank" rel="external">String vs Array Concat</a></li>
<li><a href="http://jsperf.com/try-catch-in-loop-cost" target="_blank" rel="external">Try/Catch Cost In a Loop</a></li>
<li><a href="http://jsperf.com/bang-function" target="_blank" rel="external">Bang Function</a></li>
<li><a href="http://jsperf.com/jquery-find-vs-context-sel/13" target="_blank" rel="external">jQuery Find vs Context, Selector</a></li>
<li><a href="http://jsperf.com/innerhtml-vs-textcontent-for-script-text" target="_blank" rel="external">innerHTML vs textContent for script text</a></li>
<li><a href="http://jsperf.com/ya-string-concat" target="_blank" rel="external">Long String Concatenation</a></li>
<li>Loading…</li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<p><a name="resources"></a></p>
<h2 id="资源"><a href="#资源" class="headerlink" title="资源"></a>资源</h2><p><strong>Learning ES6</strong></p>
<ul>
<li><a href="https://people.mozilla.org/~jorendorff/es6-draft.html" target="_blank" rel="external">Draft ECMA 2015 (ES6) Spec</a></li>
<li><a href="http://exploringjs.com/" target="_blank" rel="external">ExploringJS</a></li>
<li><a href="https://kangax.github.io/compat-table/es6/" target="_blank" rel="external">ES6 Compatibility Table</a></li>
<li><a href="http://es6-features.org/" target="_blank" rel="external">Comprehensive Overview of ES6 Features</a></li>
</ul>
<p><strong>Read This</strong></p>
<ul>
<li><a href="http://es5.github.com/" target="_blank" rel="external">Annotated ECMAScript 5.1</a></li>
</ul>
<p><strong>Tools</strong></p>
<ul>
<li>Code Style Linters<ul>
<li><a href="http://eslint.org/" target="_blank" rel="external">ESlint</a> - <a href="https://github.com/airbnb/javascript/blob/master/linters/.eslintrc" target="_blank" rel="external">Airbnb Style .eslintrc</a></li>
<li><a href="http://www.jshint.com/" target="_blank" rel="external">JSHint</a> - <a href="https://github.com/airbnb/javascript/blob/master/linters/jshintrc" target="_blank" rel="external">Airbnb Style .jshintrc</a></li>
<li><a href="https://github.com/jscs-dev/node-jscs" target="_blank" rel="external">JSCS</a> - <a href="https://github.com/jscs-dev/node-jscs/blob/master/presets/airbnb.json" target="_blank" rel="external">Airbnb Style Preset</a></li>
</ul>
</li>
</ul>
<p><strong>Other Styleguides</strong></p>
<ul>
<li><a href="http://google-styleguide.googlecode.com/svn/trunk/javascriptguide.xml" target="_blank" rel="external">Google JavaScript Style Guide</a></li>
<li><a href="http://docs.jquery.com/JQuery_Core_Style_Guidelines" target="_blank" rel="external">jQuery Core Style Guidelines</a></li>
<li><a href="https://github.com/rwldrn/idiomatic.js/" target="_blank" rel="external">Principles of Writing Consistent, Idiomatic JavaScript</a></li>
</ul>
<p><strong>Other Styles</strong></p>
<ul>
<li><a href="https://gist.github.com/4135065" target="_blank" rel="external">Naming this in nested functions</a> - Christian Johansen</li>
<li><a href="https://github.com/airbnb/javascript/issues/52" target="_blank" rel="external">Conditional Callbacks</a> - Ross Allen</li>
<li><a href="http://sideeffect.kr/popularconvention/#javascript" target="_blank" rel="external">Popular JavaScript Coding Conventions on Github</a> - JeongHoon Byun</li>
<li><a href="http://benalman.com/news/2012/05/multiple-var-statements-javascript/" target="_blank" rel="external">Multiple var statements in JavaScript, not superfluous</a> - Ben Alman</li>
</ul>
<p><strong>Further Reading</strong></p>
<ul>
<li><a href="http://javascriptweblog.wordpress.com/2010/10/25/understanding-javascript-closures/" target="_blank" rel="external">Understanding JavaScript Closures</a> - Angus Croll</li>
<li><a href="http://www.2ality.com/2013/06/basic-javascript.html" target="_blank" rel="external">Basic JavaScript for the impatient programmer</a> - Dr. Axel Rauschmayer</li>
<li><a href="http://youmightnotneedjquery.com/" target="_blank" rel="external">You Might Not Need jQuery</a> - Zack Bloom &amp; Adam Schwartz</li>
<li><a href="https://github.com/lukehoban/es6features" target="_blank" rel="external">ES6 Features</a> - Luke Hoban</li>
<li><a href="https://github.com/bendc/frontend-guidelines" target="_blank" rel="external">Frontend Guidelines</a> - Benjamin De Cock</li>
</ul>
<p><strong>Books</strong></p>
<ul>
<li><a href="http://www.amazon.com/JavaScript-Good-Parts-Douglas-Crockford/dp/0596517742" target="_blank" rel="external">JavaScript: The Good Parts</a> - Douglas Crockford</li>
<li><a href="http://www.amazon.com/JavaScript-Patterns-Stoyan-Stefanov/dp/0596806752" target="_blank" rel="external">JavaScript Patterns</a> - Stoyan Stefanov</li>
<li><a href="http://www.amazon.com/JavaScript-Design-Patterns-Recipes-Problem-Solution/dp/159059908X" target="_blank" rel="external">Pro JavaScript Design Patterns</a>  - Ross Harmes and Dustin Diaz</li>
<li><a href="http://www.amazon.com/High-Performance-Web-Sites-Essential/dp/0596529309" target="_blank" rel="external">High Performance Web Sites: Essential Knowledge for Front-End Engineers</a> - Steve Souders</li>
<li><a href="http://www.amazon.com/Maintainable-JavaScript-Nicholas-C-Zakas/dp/1449327680" target="_blank" rel="external">Maintainable JavaScript</a> - Nicholas C. Zakas</li>
<li><a href="http://www.amazon.com/JavaScript-Web-Applications-Alex-MacCaw/dp/144930351X" target="_blank" rel="external">JavaScript Web Applications</a> - Alex MacCaw</li>
<li><a href="http://www.amazon.com/Pro-JavaScript-Techniques-John-Resig/dp/1590597273" target="_blank" rel="external">Pro JavaScript Techniques</a> - John Resig</li>
<li><a href="http://www.amazon.com/Smashing-Node-js-JavaScript-Everywhere-Magazine/dp/1119962595" target="_blank" rel="external">Smashing Node.js: JavaScript Everywhere</a> - Guillermo Rauch</li>
<li><a href="http://www.amazon.com/Secrets-JavaScript-Ninja-John-Resig/dp/193398869X" target="_blank" rel="external">Secrets of the JavaScript Ninja</a> - John Resig and Bear Bibeault</li>
<li><a href="http://humanjavascript.com/" target="_blank" rel="external">Human JavaScript</a> - Henrik Joreteg</li>
<li><a href="http://superherojs.com/" target="_blank" rel="external">Superhero.js</a> - Kim Joar Bekkelund, Mads Mobæk, &amp; Olav Bjorkoy</li>
<li><a href="http://jsbooks.revolunet.com/" target="_blank" rel="external">JSBooks</a> - Julien Bouquillon</li>
<li><a href="http://manning.com/vinegar/" target="_blank" rel="external">Third Party JavaScript</a> - Ben Vinegar and Anton Kovalyov</li>
<li><a href="http://amzn.com/0321812182" target="_blank" rel="external">Effective JavaScript: 68 Specific Ways to Harness the Power of JavaScript</a> - David Herman</li>
<li><a href="http://eloquentjavascript.net/" target="_blank" rel="external">Eloquent JavaScript</a> - Marijn Haverbeke</li>
</ul>
<p><strong>Blogs</strong></p>
<ul>
<li><a href="http://dailyjs.com/" target="_blank" rel="external">DailyJS</a></li>
<li><a href="http://javascriptweekly.com/" target="_blank" rel="external">JavaScript Weekly</a></li>
<li><a href="http://javascriptweblog.wordpress.com/" target="_blank" rel="external">JavaScript, JavaScript…</a></li>
<li><a href="http://weblog.bocoup.com/" target="_blank" rel="external">Bocoup Weblog</a></li>
<li><a href="http://www.adequatelygood.com/" target="_blank" rel="external">Adequately Good</a></li>
<li><a href="http://www.nczonline.net/" target="_blank" rel="external">NCZOnline</a></li>
<li><a href="http://perfectionkills.com/" target="_blank" rel="external">Perfection Kills</a></li>
<li><a href="http://benalman.com/" target="_blank" rel="external">Ben Alman</a></li>
<li><a href="http://dmitry.baranovskiy.com/" target="_blank" rel="external">Dmitry Baranovskiy</a></li>
<li><a href="http://dustindiaz.com/" target="_blank" rel="external">Dustin Diaz</a></li>
<li><a href="http://net.tutsplus.com/?s=javascript" target="_blank" rel="external">nettuts</a></li>
</ul>
<p><strong>Podcasts</strong></p>
<ul>
<li><a href="http://devchat.tv/js-jabber/" target="_blank" rel="external">JavaScript Jabber</a></li>
</ul>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
<h2 id="License"><a href="#License" class="headerlink" title="License"></a>License</h2><p>(The MIT License)</p>
<p>Copyright (c) 2014 Airbnb</p>
<p>Permission is hereby granted, free of charge, to any person obtaining<br>a copy of this software and associated documentation files (the<br>‘Software’), to deal in the Software without restriction, including<br>without limitation the rights to use, copy, modify, merge, publish,<br>distribute, sublicense, and/or sell copies of the Software, and to<br>permit persons to whom the Software is furnished to do so, subject to<br>the following conditions:</p>
<p>The above copyright notice and this permission notice shall be<br>included in all copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED ‘AS IS’, WITHOUT WARRANTY OF ANY KIND,<br>EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF<br>MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.<br>IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY<br>CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,<br>TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE<br>SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
<p><strong><a href="#table-of-contents">⬆ 返回目录</a></strong></p>
]]></content>
      
        
        <tags>
            
            <tag> 技术文章 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[js-code]]></title>
      <url>/blog/2017/07/19/js-code/</url>
      <content type="html"><![CDATA[<ol>
<li><p>日期格式化</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Date</span>.prototype.format = <span class="function"><span class="keyword">function</span> (<span class="params">fmt</span>) </span>&#123; <span class="comment">//author: meizz </span></div><div class="line">      <span class="keyword">var</span> o = &#123;</div><div class="line">          <span class="string">"M+"</span>: <span class="keyword">this</span>.getMonth() + <span class="number">1</span>, <span class="comment">//月份 </span></div><div class="line">          <span class="string">"d+"</span>: <span class="keyword">this</span>.getDate(), <span class="comment">//日 </span></div><div class="line">          <span class="string">"h+"</span>: <span class="keyword">this</span>.getHours(), <span class="comment">//小时 </span></div><div class="line">          <span class="string">"m+"</span>: <span class="keyword">this</span>.getMinutes(), <span class="comment">//分 </span></div><div class="line">          <span class="string">"s+"</span>: <span class="keyword">this</span>.getSeconds(), <span class="comment">//秒 </span></div><div class="line">          <span class="string">"q+"</span>: <span class="built_in">Math</span>.floor((<span class="keyword">this</span>.getMonth() + <span class="number">3</span>) / <span class="number">3</span>), <span class="comment">//季度 </span></div><div class="line">          <span class="string">"S"</span>: <span class="keyword">this</span>.getMilliseconds() <span class="comment">//毫秒 </span></div><div class="line">      &#125;;</div><div class="line">      <span class="keyword">if</span> (<span class="regexp">/(y+)/</span>.test(fmt)) fmt = fmt.replace(<span class="built_in">RegExp</span>.$<span class="number">1</span>, (<span class="keyword">this</span>.getFullYear() + <span class="string">""</span>).substr(<span class="number">4</span> - <span class="built_in">RegExp</span>.$<span class="number">1.</span>length));</div><div class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> k <span class="keyword">in</span> o)</div><div class="line">      <span class="keyword">if</span> (<span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"("</span> + k + <span class="string">")"</span>).test(fmt)) fmt = fmt.replace(<span class="built_in">RegExp</span>.$<span class="number">1</span>, (<span class="built_in">RegExp</span>.$<span class="number">1.</span>length == <span class="number">1</span>) ? (o[k]) : ((<span class="string">"00"</span> + o[k]).substr((<span class="string">""</span> + o[k]).length)));</div><div class="line">      <span class="keyword">return</span> fmt;</div><div class="line">  &#125;;</div></pre></td></tr></table></figure>
</li>
<li><p>字符串操作</p>
</li>
</ol>
<p>2-1 去除字符串空格<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//去除空格  type 1-所有空格  2-前后空格  3-前空格 4-后空格</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">trim</span>(<span class="params">str,type</span>)</span>&#123;</div><div class="line">    <span class="keyword">switch</span> (type)&#123;</div><div class="line">        <span class="keyword">case</span> <span class="number">1</span>:<span class="keyword">return</span> str.replace(<span class="regexp">/\s+/g</span>,<span class="string">""</span>);</div><div class="line">        <span class="keyword">case</span> <span class="number">2</span>:<span class="keyword">return</span> str.replace(<span class="regexp">/(^\s*)|(\s*$)/g</span>, <span class="string">""</span>);</div><div class="line">        <span class="keyword">case</span> <span class="number">3</span>:<span class="keyword">return</span> str.replace(<span class="regexp">/(^\s*)/g</span>, <span class="string">""</span>);</div><div class="line">        <span class="keyword">case</span> <span class="number">4</span>:<span class="keyword">return</span> str.replace(<span class="regexp">/(\s*$)/g</span>, <span class="string">""</span>);</div><div class="line">        <span class="keyword">default</span>:<span class="keyword">return</span> str;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>2-2字母大小写切换<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*type</span></div><div class="line">1: 首字母大写   </div><div class="line">2：首页母小写</div><div class="line">3：大小写转换</div><div class="line">4：全部大写</div><div class="line">5：全部小写</div><div class="line"> * */</div><div class="line"><span class="comment">//changeCase('asdasd',1)</span></div><div class="line"><span class="comment">//Asdasd</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">changeCase</span>(<span class="params">str,type</span>)</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">switch</span>(type)&#123;</div><div class="line">        <span class="keyword">case</span> <span class="number">1</span>:<span class="keyword">return</span> str.replace(<span class="regexp">/^(\w)(\w+)/</span>,<span class="function"><span class="keyword">function</span> (<span class="params">v,v1,v2</span>)</span>&#123;<span class="keyword">return</span> v1.toUpperCase() + v2.toLowerCase();&#125;);</div><div class="line">        <span class="keyword">case</span> <span class="number">2</span>:<span class="keyword">return</span> str.replace(<span class="regexp">/^(\w)(\w+)/</span>,<span class="function"><span class="keyword">function</span> (<span class="params">v,v1,v2</span>)</span>&#123;<span class="keyword">return</span> v1.toLowerCase() + v2.toUpperCase();&#125;);</div><div class="line">        <span class="keyword">case</span> <span class="number">3</span>:<span class="keyword">return</span> str.replace(<span class="regexp">/^([a-z]+)([A-Z]+)/</span>,<span class="function"><span class="keyword">function</span> (<span class="params">v,v1,v2</span>)</span>&#123;<span class="keyword">return</span> v1.toUpperCase() + v2.toLowerCase();&#125;);</div><div class="line">        <span class="keyword">case</span> <span class="number">4</span>:<span class="keyword">return</span> str.toUpperCase();</div><div class="line">        <span class="keyword">case</span> <span class="number">5</span>:<span class="keyword">return</span> str.toLowerCase();</div><div class="line">        <span class="keyword">default</span>:<span class="keyword">return</span> str;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>2-3字符串循环复制<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//repeatStr(str-&gt;字符串, count-&gt;次数)</span></div><div class="line"><span class="comment">//repeatStr('123',3)</span></div><div class="line"><span class="comment">//"123123123"</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">repeatStr</span>(<span class="params">str, count</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> text = <span class="string">''</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; count; i++) &#123;</div><div class="line">        text += str;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> text;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>2-4字符串替换<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//字符串替换(字符串,要替换的字符,替换成什么)</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">replaceAll</span>(<span class="params">str,AFindText,ARepText</span>)</span>&#123;</div><div class="line">　　　raRegExp = <span class="keyword">new</span> <span class="built_in">RegExp</span>(AFindText,<span class="string">"g"</span>);</div><div class="line">　　　<span class="keyword">return</span> str.replace(raRegExp,ARepText);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>2-5替换*<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//replaceStr(字符串,字符格式, 替换方式,替换的字符（默认*）)</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">replaceStr</span>(<span class="params">str, regArr, type,ARepText</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> regtext = <span class="string">''</span>, Reg = <span class="literal">null</span>,replaceText=ARepText||<span class="string">'*'</span>;</div><div class="line">    <span class="comment">//replaceStr('18819322663',[3,5,3],0)</span></div><div class="line">    <span class="comment">//188*****663</span></div><div class="line">    <span class="comment">//repeatStr是在上面定义过的（字符串循环复制），大家注意哦</span></div><div class="line">    <span class="keyword">if</span> (regArr.length === <span class="number">3</span> &amp;&amp; type === <span class="number">0</span>) &#123;</div><div class="line">        regtext = <span class="string">'(\\w&#123;'</span> + regArr[<span class="number">0</span>] + <span class="string">'&#125;)\\w&#123;'</span> + regArr[<span class="number">1</span>] + <span class="string">'&#125;(\\w&#123;'</span> + regArr[<span class="number">2</span>] + <span class="string">'&#125;)'</span></div><div class="line">        Reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(regtext);</div><div class="line">        <span class="keyword">var</span> replaceCount = repeatStr(replaceText, regArr[<span class="number">1</span>]);</div><div class="line">        <span class="keyword">return</span> str.replace(Reg, <span class="string">'$1'</span> + replaceCount + <span class="string">'$2'</span>)</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//replaceStr('asdasdasdaa',[3,5,3],1)</span></div><div class="line">    <span class="comment">//***asdas***</span></div><div class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (regArr.length === <span class="number">3</span> &amp;&amp; type === <span class="number">1</span>) &#123;</div><div class="line">        regtext = <span class="string">'\\w&#123;'</span> + regArr[<span class="number">0</span>] + <span class="string">'&#125;(\\w&#123;'</span> + regArr[<span class="number">1</span>] + <span class="string">'&#125;)\\w&#123;'</span> + regArr[<span class="number">2</span>] + <span class="string">'&#125;'</span></div><div class="line">        Reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(regtext);</div><div class="line">        <span class="keyword">var</span> replaceCount1 = repeatSte(replaceText, regArr[<span class="number">0</span>]);</div><div class="line">        <span class="keyword">var</span> replaceCount2 = repeatSte(replaceText, regArr[<span class="number">2</span>]);</div><div class="line">        <span class="keyword">return</span> str.replace(Reg, replaceCount1 + <span class="string">'$1'</span> + replaceCount2)</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//replaceStr('1asd88465asdwqe3',[5],0)</span></div><div class="line">    <span class="comment">//*****8465asdwqe3</span></div><div class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (regArr.length === <span class="number">1</span> &amp;&amp; type == <span class="number">0</span>) &#123;</div><div class="line">        regtext = <span class="string">'(^\\w&#123;'</span> + regArr[<span class="number">0</span>] +  <span class="string">'&#125;)'</span></div><div class="line">        Reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(regtext);</div><div class="line">        <span class="keyword">var</span> replaceCount = repeatSte(replaceText, regArr[<span class="number">0</span>]);</div><div class="line">        <span class="keyword">return</span> str.replace(Reg, replaceCount)</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//replaceStr('1asd88465asdwqe3',[5],1,'+')</span></div><div class="line">    <span class="comment">//"1asd88465as+++++"</span></div><div class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (regArr.length === <span class="number">1</span> &amp;&amp; type == <span class="number">1</span>) &#123;</div><div class="line">        regtext = <span class="string">'(\\w&#123;'</span> + regArr[<span class="number">0</span>] +  <span class="string">'&#125;$)'</span></div><div class="line">        Reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(regtext);</div><div class="line">        <span class="keyword">var</span> replaceCount = repeatSte(replaceText, regArr[<span class="number">0</span>]);</div><div class="line">        <span class="keyword">return</span> str.replace(Reg, replaceCount)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">ES8中采用<span class="string">`string.padStart`</span>,<span class="string">`string.padEnd`</span></div><div class="line">eg:</div><div class="line"><span class="string">"aaa"</span>.padStart(<span class="number">5</span>,<span class="string">"x"</span>)</div><div class="line"><span class="string">"aaa"</span>.padEnd(<span class="number">5</span>,<span class="string">"x"</span>)</div></pre></td></tr></table></figure></p>
<p>2-6检测字符串<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//checkType('165226226326','phone')</span></div><div class="line"><span class="comment">//false</span></div><div class="line"><span class="comment">//大家可以根据需要扩展</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkType</span> (<span class="params">str, type</span>) </span>&#123;</div><div class="line">    <span class="keyword">switch</span> (type) &#123;</div><div class="line">        <span class="keyword">case</span> <span class="string">'email'</span>:</div><div class="line">            <span class="keyword">return</span> <span class="regexp">/^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/</span>.test(str);</div><div class="line">        <span class="keyword">case</span> <span class="string">'phone'</span>:</div><div class="line">            <span class="keyword">return</span> <span class="regexp">/^1[3|4|5|7|8][0-9]&#123;9&#125;$/</span>.test(str);</div><div class="line">        <span class="keyword">case</span> <span class="string">'tel'</span>:</div><div class="line">            <span class="keyword">return</span> <span class="regexp">/^(0\d&#123;2,3&#125;-\d&#123;7,8&#125;)(-\d&#123;1,4&#125;)?$/</span>.test(str);</div><div class="line">        <span class="keyword">case</span> <span class="string">'number'</span>:</div><div class="line">            <span class="keyword">return</span> <span class="regexp">/^[0-9]$/</span>.test(str);</div><div class="line">        <span class="keyword">case</span> <span class="string">'english'</span>:</div><div class="line">            <span class="keyword">return</span> <span class="regexp">/^[a-zA-Z]+$/</span>.test(str);</div><div class="line">        <span class="keyword">case</span> <span class="string">'chinese'</span>:</div><div class="line">            <span class="keyword">return</span> <span class="regexp">/^[\u4E00-\u9FA5]+$/</span>.test(str);</div><div class="line">        <span class="keyword">case</span> <span class="string">'lower'</span>:</div><div class="line">            <span class="keyword">return</span> <span class="regexp">/^[a-z]+$/</span>.test(str);</div><div class="line">        <span class="keyword">case</span> <span class="string">'upper'</span>:</div><div class="line">            <span class="keyword">return</span> <span class="regexp">/^[A-Z]+$/</span>.test(str);</div><div class="line">        <span class="keyword">default</span> :</div><div class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">可以封装成自己的常量库进行封装</div><div class="line"><span class="keyword">var</span> REGS = &#123;</div><div class="line">  <span class="attr">EMAIL</span>:<span class="string">'/^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/'</span>,</div><div class="line">  <span class="attr">PHONE</span>: <span class="regexp">/^1[3|4|5|7|8][0-9]&#123;9&#125;$/</span></div><div class="line">  ...others</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>2-7检测密码强度<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//checkPwd('12asdASAD')</span></div><div class="line"><span class="comment">//3(强度等级为3)</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkPwd</span>(<span class="params">str</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> nowLv = <span class="number">0</span>;</div><div class="line">    <span class="keyword">if</span> (str.length &lt; <span class="number">6</span>) &#123;</div><div class="line">        <span class="keyword">return</span> nowLv</div><div class="line">    &#125;</div><div class="line">    ;</div><div class="line">    <span class="keyword">if</span> (<span class="regexp">/[0-9]/</span>.test(str)) &#123;</div><div class="line">        nowLv++</div><div class="line">    &#125;</div><div class="line">    ;</div><div class="line">    <span class="keyword">if</span> (<span class="regexp">/[a-z]/</span>.test(str)) &#123;</div><div class="line">        nowLv++</div><div class="line">    &#125;</div><div class="line">    ;</div><div class="line">    <span class="keyword">if</span> (<span class="regexp">/[A-Z]/</span>.test(str)) &#123;</div><div class="line">        nowLv++</div><div class="line">    &#125;</div><div class="line">    ;</div><div class="line">    <span class="keyword">if</span> (<span class="regexp">/[\.|-|_]/</span>.test(str)) &#123;</div><div class="line">        nowLv++</div><div class="line">    &#125;</div><div class="line">    ;</div><div class="line">    <span class="keyword">return</span> nowLv;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>2-8随机码（toString详解）<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//count取值范围0-36</span></div><div class="line"></div><div class="line"><span class="comment">//randomNumber(10)</span></div><div class="line"><span class="comment">//"2584316588472575"</span></div><div class="line"></div><div class="line"><span class="comment">//randomNumber(14)</span></div><div class="line"><span class="comment">//"9b405070dd00122640c192caab84537"</span></div><div class="line"></div><div class="line"><span class="comment">//Math.random().toString(36).substring(2);</span></div><div class="line"><span class="comment">//"83vhdx10rmjkyb9"</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">randomNumber</span>(<span class="params">count</span>)</span>&#123;</div><div class="line">   <span class="keyword">return</span> <span class="built_in">Math</span>.random().toString(count).substring(<span class="number">2</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>2-9查找字符串<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">可能标题会有点误导，下面我就简单说明一个需求，在字符串<span class="string">'sad44654blog5a1sd67as9dablog4s5d16zxc4sdweasjkblogwqepaskdkblogahseiuadbhjcibloguyeajzxkcabloguyiwezxc967'</span>中找出<span class="string">'blog'</span>的出现次数。代码如下</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">countStr</span> (<span class="params">str,strSplit</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> str.split(strSplit).length<span class="number">-1</span></div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> strTest=<span class="string">'sad44654blog5a1sd67as9dablog4s5d16zxc4sdweasjkblogwqepaskdkblogahseiuadbhjcibloguyeajzxkcabloguyiwezxc967'</span></div><div class="line"><span class="comment">//countStr(strTest,'blog')</span></div><div class="line"><span class="comment">//6</span></div></pre></td></tr></table></figure></p>
<ol>
<li>数组操作<br>3-1数组去重<br>这个方法是在太多了，我之前写的文章(js数组操作–使用迭代方法替代for循环,js关键词变色，数组打乱，数组去重的实现和封装)也有提到，我今天这里就写一种之前没用过的方法。</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">removeRepeatArray</span>(<span class="params">arr</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">Array</span>.from(<span class="keyword">new</span> <span class="built_in">Set</span>(arr))</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>3-2数组顺序打乱<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">upsetArr</span>(<span class="params">arr</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> arr.sort(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="keyword">return</span> <span class="built_in">Math</span>.random() - <span class="number">0.5</span>&#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>3-3数组最大值最小值<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//这一块的封装，主要是针对数字类型的数组</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">maxArr</span>(<span class="params">arr</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.max.apply(<span class="literal">null</span>,arr);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">minArr</span>(<span class="params">arr</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.min.apply(<span class="literal">null</span>,arr);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>3-4数组求和，平均值<br>//这一块的封装，主要是针对数字类型的数组<br>//求和<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">sumArr</span>(<span class="params">arr</span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> sumText=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>,len=arr.length;i&lt;len;i++)&#123;</div><div class="line">        sumText+=arr[i];</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> sumText</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>//平均值,小数点可能会有很多位，这里不做处理，处理了使用就不灵活了！<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">function covArr(arr)&#123;</div><div class="line">    var sumText=sumArr(arr);</div><div class="line">    var covText=sumText/length;</div><div class="line">    return covText</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>3-5从数组中随机获取元素<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//randomOne([1,2,3,6,8,5,4,2,6])</span></div><div class="line"><span class="comment">//2</span></div><div class="line"><span class="comment">//randomOne([1,2,3,6,8,5,4,2,6])</span></div><div class="line"><span class="comment">//8</span></div><div class="line"><span class="comment">//randomOne([1,2,3,6,8,5,4,2,6])</span></div><div class="line"><span class="comment">//8</span></div><div class="line"><span class="comment">//randomOne([1,2,3,6,8,5,4,2,6])</span></div><div class="line"><span class="comment">//1</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">randomOne</span>(<span class="params">arr</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> arr[<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * arr.length)];</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>3-6返回数组（字符串）一个元素出现的次数<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//getEleCount('asd56+asdasdwqe','a')</span></div><div class="line"><span class="comment">//3</span></div><div class="line"><span class="comment">//getEleCount([1,2,3,4,5,66,77,22,55,22],22)</span></div><div class="line"><span class="comment">//2</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getEleCount</span> (<span class="params">obj, ele</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> num = <span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = obj.length; i &lt; len; i++) &#123;</div><div class="line">        <span class="keyword">if</span> (ele == obj[i]) &#123;</div><div class="line">            num++;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> num;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>3-7返回数组（字符串）出现最多的几次元素和出现次数<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//arr, rank-&gt;长度，默认为数组长度，ranktype，排序方式，默认降序</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCount</span>(<span class="params">arr, rank，ranktype</span>)</span>&#123; </div><div class="line">    <span class="keyword">var</span> obj = &#123;&#125;, k, arr1 = []</div><div class="line">    <span class="comment">//记录每一元素出现的次数</span></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = arr.length; i &lt; len; i++) &#123;</div><div class="line">        k = arr[i];</div><div class="line">        <span class="keyword">if</span> (obj[k]) &#123;</div><div class="line">            obj[k]++;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">else</span> &#123;</div><div class="line">            obj[k] = <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//保存结果&#123;el-'元素'，count-出现次数&#125;</span></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> o <span class="keyword">in</span> obj) &#123;</div><div class="line">        arr1.push(&#123;<span class="attr">el</span>: o, <span class="attr">count</span>: obj[o]&#125;);</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//排序（降序）</span></div><div class="line">    arr1.sort(<span class="function"><span class="keyword">function</span> (<span class="params">n1, n2</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> n2.count - n1.count</div><div class="line">    &#125;);</div><div class="line">    <span class="comment">//如果ranktype为1，则为升序，反转数组</span></div><div class="line">    <span class="keyword">if</span>(ranktype===<span class="number">1</span>)&#123;</div><div class="line">        arr1=arr1.reverse();</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">var</span> rank1 = rank || arr1.length;</div><div class="line">    <span class="keyword">return</span> arr1.slice(<span class="number">0</span>,rank1);</div><div class="line">&#125;</div><div class="line">getCount([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">6</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">2</span>])</div><div class="line">默认情况，返回所有元素出现的次数</div><div class="line"></div><div class="line"></div><div class="line">getCount([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">6</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">2</span>],<span class="number">3</span>)</div><div class="line">传参（rank=<span class="number">3</span>），只返回出现次数排序前三的</div><div class="line"></div><div class="line"></div><div class="line">getCount([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">6</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">2</span>],<span class="literal">null</span>,<span class="number">1</span>)</div><div class="line">传参（ranktype=<span class="number">1</span>,rank=<span class="literal">null</span>），升序返回所有元素出现次数</div><div class="line"></div><div class="line"></div><div class="line">getCount([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">6</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">2</span>],<span class="number">3</span>,<span class="number">1</span>)</div><div class="line">传参（rank=<span class="number">3</span>，ranktype=<span class="number">1</span>），只返回出现次数排序（升序）前三的</div></pre></td></tr></table></figure></p>
<p>3-8得到n1-n2下标的数组<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//getArrayNum([0,1,2,3,4,5,6,7,8,9],5,9)</span></div><div class="line"><span class="comment">//[5, 6, 7, 8, 9]</span></div><div class="line"></div><div class="line"><span class="comment">//getArrayNum([0,1,2,3,4,5,6,7,8,9],2) 不传第二个参数,默认返回从n1到数组结束的元素</span></div><div class="line"><span class="comment">//[2, 3, 4, 5, 6, 7, 8, 9]</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getArrayNum</span>(<span class="params">arr,n1,n2</span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> arr1=[],len=n2||arr.length<span class="number">-1</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i=n1;i&lt;=len;i++)&#123;</div><div class="line">        arr1.push(arr[i])</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> arr1;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>3-9筛选数组<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">/删除值为<span class="string">'val'</span>的数组元素</div><div class="line"><span class="comment">//removeArrayForValue(['test','test1','test2','test','aaa'],'test','%')</span></div><div class="line"><span class="comment">//["aaa"]   带有'test'的都删除</span></div><div class="line">    </div><div class="line"><span class="comment">//removeArrayForValue(['test','test1','test2','test','aaa'],'test')</span></div><div class="line"><span class="comment">//["test1", "test2", "aaa"]  //数组元素的值全等于'test'才被删除</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">removeArrayForValue</span>(<span class="params">arr,val,type</span>)</span>&#123;</div><div class="line">    arr.filter(<span class="function"><span class="keyword">function</span>(<span class="params">item</span>)</span>&#123;<span class="keyword">return</span> type===<span class="string">'%'</span>?item.indexOf(val)!==<span class="number">-1</span>:item!==val&#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>4.基础DOM操作<br>这个部分代码其实参考jquery的一些函数写法，唯一区别就是调用不用，参数一样.比如下面的栗子<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">//设置对象内容</div><div class="line">jquery：$(&apos;#xxx&apos;).html(&apos;hello world&apos;);</div><div class="line">现在：html(document.getElementById(&apos;xxx&apos;),&apos;hello world&apos;)</div><div class="line">//获取对象内容</div><div class="line">jquery：$(&apos;#xxx&apos;).html();</div><div class="line">现在：html(document.getElementById(&apos;xxx&apos;))</div></pre></td></tr></table></figure></p>
<p>4-1检测对象是否有哪个类名<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">hasClass</span>(<span class="params">obj,classStr</span>)</span>&#123; </div><div class="line">    <span class="keyword">var</span> arr=obj.className.split(<span class="regexp">/\s+/</span>); <span class="comment">//这个正则表达式是因为class可以有多个,判断是否包含 </span></div><div class="line">    <span class="keyword">return</span> (arr.indexOf(classStr)==<span class="number">-1</span>)?<span class="literal">false</span>:<span class="literal">true</span>;</div><div class="line">&#125;,</div></pre></td></tr></table></figure></p>
<p>4-2添加类名<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">addClass</span>(<span class="params">obj,classStr</span>)</span>&#123;</div><div class="line">    <span class="keyword">if</span> (!<span class="keyword">this</span>.hasClass(obj,classStr))&#123;obj.className += <span class="string">" "</span> + classStr&#125;;</div><div class="line">&#125;,</div></pre></td></tr></table></figure></p>
<p>4-3删除类名<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">removeClass</span>(<span class="params">obj,classStr</span>)</span>&#123;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.hasClass(obj,classStr)) &#123;</div><div class="line">        <span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">'(\\s|^)'</span> + classStr + <span class="string">'(\\s|$)'</span>);</div><div class="line">        obj.className = obj.className.replace(reg, <span class="string">''</span>);</div><div class="line">    &#125;</div><div class="line">&#125;,</div></pre></td></tr></table></figure></p>
<p>4-4替换类名(“被替换的类名”,”替换的类名”)<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">replaceClass</span>(<span class="params">obj,newName,oldName</span>) </span>&#123;</div><div class="line">    removeClass(obj,oldName);</div><div class="line">    addClass(obj,newName);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>4-5获取兄弟节点<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">siblings</span>(<span class="params">obj</span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> a=[];<span class="comment">//定义一个数组，用来存o的兄弟元素 </span></div><div class="line">    <span class="keyword">var</span> p=obj.previousSibling; </div><div class="line">    <span class="keyword">while</span>(p)&#123;<span class="comment">//先取o的哥哥们 判断有没有上一个哥哥元素，如果有则往下执行 p表示previousSibling </span></div><div class="line">        <span class="keyword">if</span>(p.nodeType===<span class="number">1</span>)&#123; </div><div class="line">        a.push(p); </div><div class="line">        &#125; </div><div class="line">        p=p.previousSibling<span class="comment">//最后把上一个节点赋给p </span></div><div class="line">    &#125; </div><div class="line">    a.reverse()<span class="comment">//把顺序反转一下 这样元素的顺序就是按先后的了 </span></div><div class="line">    <span class="keyword">var</span> n=obj.nextSibling;<span class="comment">//再取o的弟弟 </span></div><div class="line">    <span class="keyword">while</span>(n)&#123;<span class="comment">//判断有没有下一个弟弟结点 n是nextSibling的意思 </span></div><div class="line">        <span class="keyword">if</span>(n.nodeType===<span class="number">1</span>)&#123; </div><div class="line">            a.push(n); </div><div class="line">        &#125; </div><div class="line">        n=n.nextSibling; </div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> a;</div><div class="line">&#125;,</div></pre></td></tr></table></figure></p>
<p>4-6设置样式<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">css</span>(<span class="params">obj,json</span>)</span>&#123;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> attr <span class="keyword">in</span> json)&#123;</div><div class="line">        obj.style[attr]=json[attr];</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>4-7设置文本内容<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">html</span>(<span class="params">obj</span>)</span>&#123;</div><div class="line">    <span class="keyword">if</span>(<span class="built_in">arguments</span>.length==<span class="number">0</span>)&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.innerHTML;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">arguments</span>.length==<span class="number">1</span>)&#123;</div><div class="line">        <span class="keyword">this</span>.innerHTML=<span class="built_in">arguments</span>[<span class="number">0</span>];</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>4-8显示隐藏<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params">obj</span>)</span>&#123;</div><div class="line">    obj.style.display=<span class="string">""</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">hide</span>(<span class="params">obj</span>)</span>&#123;</div><div class="line">    obj.style.display=<span class="string">"none"</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>5.其他操作<br>5-1cookie<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//cookie</span></div><div class="line"><span class="comment">//设置cookie</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">setCookie</span>(<span class="params">name,value,iDay</span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> oDate=<span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">    oDate.setDate(oDate.getDate()+iDay);</div><div class="line">    <span class="built_in">document</span>.cookie=name+<span class="string">'='</span>+value+<span class="string">';expires='</span>+oDate;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//获取cookie</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCookie</span>(<span class="params">name</span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> arr=<span class="built_in">document</span>.cookie.split(<span class="string">'; '</span>);</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;arr.length;i++)&#123;</div><div class="line">        <span class="keyword">var</span> arr2=arr[i].split(<span class="string">'='</span>);</div><div class="line">        <span class="keyword">if</span>(arr2[<span class="number">0</span>]==name)</div><div class="line">        &#123;</div><div class="line">            <span class="keyword">return</span> arr2[<span class="number">1</span>];</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="string">''</span>;</div><div class="line">&#125;</div><div class="line"><span class="string">``</span><span class="string">`js</span></div><div class="line">//删除cookie</div><div class="line">function removeCookie(name)&#123;</div><div class="line">    setCookie(name,1,-1);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>5-2清除对象中值为空的属性<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//filterParams(&#123;a:"",b:null,c:"010",d:123&#125;)</span></div><div class="line"><span class="comment">//Object &#123;c: "010", d: 123&#125;</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">filterParams</span>(<span class="params">obj</span>)</span>&#123;</div><div class="line">    <span class="keyword">let</span> _newPar = &#123;&#125;;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> obj) &#123;</div><div class="line">        <span class="keyword">if</span> ((obj[key] === <span class="number">0</span> || obj[key]) &amp;&amp; obj[key].toString().replace(<span class="regexp">/(^\s*)|(\s*$)/g</span>, <span class="string">''</span>) !== <span class="string">''</span>) &#123;</div><div class="line">            _newPar[key] = obj[key];</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> _newPar;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>5-3现金额大写转换函数<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//upDigit(168752632)</span></div><div class="line"><span class="comment">//"人民币壹亿陆仟捌佰柒拾伍万贰仟陆佰叁拾贰元整"</span></div><div class="line"><span class="comment">//upDigit(1682)</span></div><div class="line"><span class="comment">//"人民币壹仟陆佰捌拾贰元整"</span></div><div class="line"><span class="comment">//upDigit(-1693)</span></div><div class="line"><span class="comment">//"欠人民币壹仟陆佰玖拾叁元整"</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">upDigit</span>(<span class="params">n</span>)   </span></div><div class="line">&#123;  </div><div class="line">    <span class="keyword">var</span> fraction = [<span class="string">'角'</span>, <span class="string">'分'</span>,<span class="string">'厘'</span>];  </div><div class="line">    <span class="keyword">var</span> digit = [<span class="string">'零'</span>, <span class="string">'壹'</span>, <span class="string">'贰'</span>, <span class="string">'叁'</span>, <span class="string">'肆'</span>, <span class="string">'伍'</span>, <span class="string">'陆'</span>, <span class="string">'柒'</span>, <span class="string">'捌'</span>, <span class="string">'玖'</span>];  </div><div class="line">    <span class="keyword">var</span> unit = [ [<span class="string">'元'</span>, <span class="string">'万'</span>, <span class="string">'亿'</span>], [<span class="string">''</span>, <span class="string">'拾'</span>, <span class="string">'佰'</span>, <span class="string">'仟'</span>]  ];  </div><div class="line">    <span class="keyword">var</span> head = n &lt; <span class="number">0</span>? <span class="string">'欠人民币'</span>: <span class="string">'人民币'</span>;  </div><div class="line">    n = <span class="built_in">Math</span>.abs(n);  </div><div class="line">    <span class="keyword">var</span> s = <span class="string">''</span>;  </div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; fraction.length; i++)   </div><div class="line">    &#123;</div><div class="line">        s += (digit[<span class="built_in">Math</span>.floor(n * <span class="number">10</span> * <span class="built_in">Math</span>.pow(<span class="number">10</span>, i)) % <span class="number">10</span>] + fraction[i]).replace(<span class="regexp">/零./</span>, <span class="string">''</span>); </div><div class="line">    &#125; </div><div class="line">    s = s || <span class="string">'整'</span>;  </div><div class="line">    n = <span class="built_in">Math</span>.floor(n);  </div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; unit[<span class="number">0</span>].length &amp;&amp; n &gt; <span class="number">0</span>; i++)   </div><div class="line">    &#123;  </div><div class="line">        <span class="keyword">var</span> p = <span class="string">''</span>;  </div><div class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; unit[<span class="number">1</span>].length &amp;&amp; n &gt; <span class="number">0</span>; j++)   </div><div class="line">        &#123;  </div><div class="line">            p = digit[n % <span class="number">10</span>] + unit[<span class="number">1</span>][j] + p; </div><div class="line">            n = <span class="built_in">Math</span>.floor(n / <span class="number">10</span>);</div><div class="line">        &#125;</div><div class="line">        <span class="comment">//s = p.replace(/(零.)*零$/, '').replace(/^$/, '零')+ unit[0][i] + s; </span></div><div class="line">        s = p+ unit[<span class="number">0</span>][i] + s;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> head + s.replace(<span class="regexp">/(零.)*零元/</span>, <span class="string">'元'</span>).replace(<span class="regexp">/(零.)+/g</span>, <span class="string">'零'</span>).replace(<span class="regexp">/^整$/</span>, <span class="string">'零元整'</span>);</div><div class="line">&#125;</div><div class="line"><span class="string">``</span><span class="string">` </span></div><div class="line">5-4获取，设置url参数</div><div class="line">`<span class="string">``</span>js</div><div class="line"><span class="comment">//获取url参数</span></div><div class="line"><span class="comment">//getUrlPrmt('segmentfault.com/write?draftId=122000011938')</span></div><div class="line"><span class="comment">//Object&#123;draftId: "122000011938"&#125;</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getUrlPrmt</span>(<span class="params">url</span>) </span>&#123;</div><div class="line">    url = url ? url : <span class="built_in">window</span>.location.href;</div><div class="line">    <span class="keyword">let</span> _pa = url.substring(url.indexOf(<span class="string">'?'</span>) + <span class="number">1</span>), _arrS = _pa.split(<span class="string">'&amp;'</span>), _rs = &#123;&#125;;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, _len = _arrS.length; i &lt; _len; i++) &#123;</div><div class="line">        <span class="keyword">let</span> pos = _arrS[i].indexOf(<span class="string">'='</span>);</div><div class="line">        <span class="keyword">if</span> (pos == <span class="number">-1</span>) &#123;</div><div class="line">            <span class="keyword">continue</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">let</span> name = _arrS[i].substring(<span class="number">0</span>, pos), value = <span class="built_in">window</span>.decodeURIComponent(_arrS[i].substring(pos + <span class="number">1</span>));</div><div class="line">        _rs[name] = value;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> _rs;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//设置url参数</span></div><div class="line"><span class="comment">//setUrlPrmt(&#123;'a':1,'b':2&#125;)</span></div><div class="line"><span class="comment">//a=1&amp;b=2</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">setUrlPrmt</span>(<span class="params">obj</span>) </span>&#123;</div><div class="line">    <span class="keyword">let</span> _rs = [];</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> p <span class="keyword">in</span> obj) &#123;</div><div class="line">        <span class="keyword">if</span> (obj[p] != <span class="literal">null</span> &amp;&amp; obj[p] != <span class="string">''</span>) &#123;</div><div class="line">            _rs.push(p + <span class="string">'='</span> + obj[p])</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> _rs.join(<span class="string">'&amp;'</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>5-5随机返回一个范围的数字<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">randomNumber</span>(<span class="params">n1,n2</span>)</span>&#123;</div><div class="line">    <span class="comment">//randomNumber(5,10)</span></div><div class="line">    <span class="comment">//返回5-10的随机整数，包括5，10</span></div><div class="line">    <span class="keyword">if</span>(<span class="built_in">arguments</span>.length===<span class="number">2</span>)&#123;</div><div class="line">        <span class="keyword">return</span> <span class="built_in">Math</span>.round(n1+<span class="built_in">Math</span>.random()*(n2-n1));</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//randomNumber(10)</span></div><div class="line">    <span class="comment">//返回0-10的随机整数，包括0，10</span></div><div class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">arguments</span>.length===<span class="number">1</span>)&#123;</div><div class="line">        <span class="keyword">return</span> <span class="built_in">Math</span>.round(<span class="built_in">Math</span>.random()*n1)</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//randomNumber()</span></div><div class="line">    <span class="comment">//返回0-255的随机整数，包括0，255</span></div><div class="line">    <span class="keyword">else</span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="built_in">Math</span>.round(<span class="built_in">Math</span>.random()*<span class="number">255</span>)</div><div class="line">    &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>5-6随进产生颜色<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">randomColor</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="comment">//randomNumber是上面定义的函数</span></div><div class="line">    <span class="comment">//写法1</span></div><div class="line">    <span class="keyword">return</span> <span class="string">'rgb('</span> + randomNumber(<span class="number">255</span>) + <span class="string">','</span> + randomNumber(<span class="number">255</span>) + <span class="string">','</span> + randomNumber(<span class="number">255</span>) + <span class="string">')'</span>;</div><div class="line">    </div><div class="line">    <span class="comment">//写法2</span></div><div class="line">    <span class="keyword">return</span> <span class="string">'#'</span>+<span class="built_in">Math</span>.random().toString(<span class="number">16</span>).substring(<span class="number">2</span>).substr(<span class="number">0</span>,<span class="number">6</span>);</div><div class="line">    </div><div class="line">    <span class="comment">//写法3</span></div><div class="line">    <span class="keyword">var</span> color=<span class="string">'#'</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">6</span>;i++)&#123;</div><div class="line">        color+=<span class="string">'0123456789abcdef'</span>[randomNumber(<span class="number">15</span>)];</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> color;</div><div class="line">&#125;</div><div class="line"><span class="comment">//这种写法，偶尔会有问题。大家得注意哦</span></div><div class="line"><span class="comment">//Math.floor(Math.random()*0xffffff).toString(16);</span></div></pre></td></tr></table></figure></p>
<p>5-7Date日期时间部分<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//到某一个时间的倒计时</span></div><div class="line"><span class="comment">//getEndTime('2017/7/22 16:0:0')</span></div><div class="line"><span class="comment">//"剩余时间6天 2小时 28 分钟20 秒"</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getEndTime</span>(<span class="params">endTime</span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> startDate=<span class="keyword">new</span> <span class="built_in">Date</span>();  <span class="comment">//开始时间，当前时间</span></div><div class="line">    <span class="keyword">var</span> endDate=<span class="keyword">new</span> <span class="built_in">Date</span>(endTime); <span class="comment">//结束时间，需传入时间参数</span></div><div class="line">    <span class="keyword">var</span> t=endDate.getTime()-startDate.getTime();  <span class="comment">//时间差的毫秒数</span></div><div class="line">    <span class="keyword">var</span> d=<span class="number">0</span>,h=<span class="number">0</span>,m=<span class="number">0</span>,s=<span class="number">0</span>;</div><div class="line">    <span class="keyword">if</span>(t&gt;=<span class="number">0</span>)&#123;</div><div class="line">      d=<span class="built_in">Math</span>.floor(t/<span class="number">1000</span>/<span class="number">3600</span>/<span class="number">24</span>);</div><div class="line">      h=<span class="built_in">Math</span>.floor(t/<span class="number">1000</span>/<span class="number">60</span>/<span class="number">60</span>%<span class="number">24</span>);</div><div class="line">      m=<span class="built_in">Math</span>.floor(t/<span class="number">1000</span>/<span class="number">60</span>%<span class="number">60</span>);</div><div class="line">      s=<span class="built_in">Math</span>.floor(t/<span class="number">1000</span>%<span class="number">60</span>);</div><div class="line">    &#125; </div><div class="line">    <span class="keyword">return</span> <span class="string">"剩余时间"</span>+d+<span class="string">"天 "</span>+h+<span class="string">"小时 "</span>+m+<span class="string">" 分钟"</span>+s+<span class="string">" 秒"</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>5-8适配rem<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">这个适配的方法很多，我就写我自己用的方法。大家也可以去我回答过得一个问题那里看更详细的说明！移动端适配问题</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getFontSize</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> doc=<span class="built_in">document</span>,win=<span class="built_in">window</span>;</div><div class="line">    <span class="keyword">var</span> docEl = doc.documentElement,</div><div class="line">    resizeEvt = <span class="string">'orientationchange'</span> <span class="keyword">in</span> <span class="built_in">window</span> ? <span class="string">'orientationchange'</span> : <span class="string">'resize'</span>,</div><div class="line">    recalc = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> clientWidth = docEl.clientWidth;</div><div class="line">        <span class="keyword">if</span> (!clientWidth) <span class="keyword">return</span>;</div><div class="line">        <span class="comment">//如果屏幕大于750（750是根据我效果图设置的，具体数值参考效果图），就设置clientWidth=750，防止font-size会超过100px</span></div><div class="line">        <span class="keyword">if</span>(clientWidth&gt;<span class="number">750</span>)&#123;clientWidth=<span class="number">750</span>&#125;</div><div class="line">        <span class="comment">//设置根元素font-size大小</span></div><div class="line">        docEl.style.fontSize = <span class="number">100</span> * (clientWidth / <span class="number">750</span>) + <span class="string">'px'</span>;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//屏幕大小改变，或者横竖屏切换时，触发函数</span></div><div class="line">    win.addEventListener(resizeEvt, recalc, <span class="literal">false</span>);</div><div class="line">    <span class="comment">//文档加载完成时，触发函数</span></div><div class="line">    doc.addEventListener(<span class="string">'DOMContentLoaded'</span>, recalc, <span class="literal">false</span>);</div><div class="line">&#125;</div><div class="line"><span class="comment">//使用方式很简单，比如效果图上，有张图片。宽高都是100px;</span></div><div class="line"><span class="comment">//样式写法就是</span></div><div class="line">img&#123;</div><div class="line">    <span class="attr">width</span>:<span class="number">1</span>rem;</div><div class="line">    height:<span class="number">1</span>rem;</div><div class="line">&#125;</div><div class="line"><span class="comment">//这样的设置，比如在屏幕宽度大于等于750px设备上，1rem=100px；图片显示就是宽高都是100px</span></div><div class="line"><span class="comment">//比如在iphone6(屏幕宽度：375)上，375/750*100=50px;就是1rem=50px;图片显示就是宽高都是50px;</span></div></pre></td></tr></table></figure></p>
<p>6.封装成形<br>写了这么多的操作，小伙伴应该发现了一问题，全局函数太多了<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//这样的话，封装了几个操作，就增加了几个全局函数，污染了全局变量，在开发中应该尽量避免全局变量。不说别的，如果一个项目，几个人开发，很有可能会造成命名的冲突。</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">setUrlPrmt</span>(<span class="params">obj</span>)</span>&#123;..&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getUrlPrmt</span>(<span class="params">url</span>)</span>&#123;..&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">upsetArr</span>(<span class="params">obj</span>)</span>&#123;..&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">//所以，建议的封装姿势是</span></div><div class="line"><span class="keyword">var</span> myJS=&#123;</div><div class="line">    <span class="attr">setUrlPrmt</span>:<span class="function"><span class="keyword">function</span>(<span class="params">obj</span>)</span>&#123;..&#125;,</div><div class="line">    <span class="attr">getUrlPrmt</span>:<span class="function"><span class="keyword">function</span>(<span class="params">url</span>)</span>&#123;..&#125;,</div><div class="line">    <span class="attr">upsetArr</span>:<span class="function"><span class="keyword">function</span>(<span class="params">arr</span>)</span>&#123;..&#125;,</div><div class="line">&#125;</div><div class="line">这样就算别人也写这样的函数,也不会造成冲突。全局变量也只有一个，加上别人也不会很多！</div><div class="line"><span class="keyword">var</span> otherJS=&#123;</div><div class="line">    <span class="attr">setUrlPrmt</span>:<span class="function"><span class="keyword">function</span>(<span class="params">obj</span>)</span>&#123;..&#125;,</div><div class="line">    <span class="attr">getUrlPrmt</span>:<span class="function"><span class="keyword">function</span>(<span class="params">url</span>)</span>&#123;..&#125;,</div><div class="line">    <span class="attr">upsetArr</span>:<span class="function"><span class="keyword">function</span>(<span class="params">arr</span>)</span>&#123;..&#125;,</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">//最后，封装的效果是</span></div><div class="line"><span class="keyword">var</span> myJS=&#123;</div><div class="line">    <span class="comment">//去除字符串空格</span></div><div class="line">    trim:<span class="function"><span class="keyword">function</span>(<span class="params">obj</span>)</span>&#123;..&#125;,</div><div class="line">    <span class="comment">//字母大小写切换</span></div><div class="line">    changeCase:<span class="function"><span class="keyword">function</span>(<span class="params">obj</span>)</span>&#123;..&#125;,</div><div class="line">    <span class="comment">//字符串循环复制</span></div><div class="line">    repeatStr:<span class="function"><span class="keyword">function</span>(<span class="params">str</span>)</span>&#123;..&#125;,</div><div class="line">    .....</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//如果是es6的模块化开发，大家也可以</span></div><div class="line"><span class="keyword">let</span> myJS=&#123;</div><div class="line">    <span class="comment">//去除字符串空格</span></div><div class="line">    trim:<span class="function"><span class="keyword">function</span>(<span class="params">obj</span>)</span>&#123;..&#125;,</div><div class="line">    <span class="comment">//字母大小写切换</span></div><div class="line">    changeCase:<span class="function"><span class="keyword">function</span>(<span class="params">obj</span>)</span>&#123;..&#125;,</div><div class="line">    <span class="comment">//字符串循环复制</span></div><div class="line">    repeatStr:<span class="function"><span class="keyword">function</span>(<span class="params">str</span>)</span>&#123;..&#125;,</div><div class="line">    .....</div><div class="line">&#125;</div><div class="line"><span class="comment">//暴露模块，里面的方式大家也可以用es6方式实现，代码至少会少一点！</span></div><div class="line"><span class="keyword">export</span> &#123;myJS&#125;</div><div class="line">可能有小伙伴会有疑问，这样封装，调用有点麻烦，为什么不直接在原型上面封装，调用方便。比如下面的栗子！</div><div class="line"><span class="built_in">String</span>.prototype.trim=<span class="function"><span class="keyword">function</span>(<span class="params">type</span>)</span>&#123;</div><div class="line">    <span class="keyword">switch</span> (type)&#123;</div><div class="line">        <span class="keyword">case</span> <span class="number">1</span>:<span class="keyword">return</span> <span class="keyword">this</span>.replace(<span class="regexp">/\s+/g</span>,<span class="string">""</span>);</div><div class="line">        <span class="keyword">case</span> <span class="number">2</span>:<span class="keyword">return</span> <span class="keyword">this</span>.replace(<span class="regexp">/(^\s*)|(\s*$)/g</span>, <span class="string">""</span>);</div><div class="line">        <span class="keyword">case</span> <span class="number">3</span>:<span class="keyword">return</span> <span class="keyword">this</span>.replace(<span class="regexp">/(^\s*)/g</span>, <span class="string">""</span>);</div><div class="line">        <span class="keyword">case</span> <span class="number">4</span>:<span class="keyword">return</span> <span class="keyword">this</span>.replace(<span class="regexp">/(\s*$)/g</span>, <span class="string">""</span>);</div><div class="line">        <span class="keyword">default</span>:<span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="js数组去重"><a href="#js数组去重" class="headerlink" title="js数组去重"></a>js数组去重</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Array</span>.prototype.unique = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="built_in">Array</span>.from(<span class="keyword">new</span> <span class="built_in">Set</span>(<span class="keyword">this</span>));</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">Array</span>.prototype.unique = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> result = [];</div><div class="line">  <span class="keyword">this</span>.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">v</span>)</span>&#123;</div><div class="line">    <span class="keyword">if</span>(!result.includes(v))&#123;</div><div class="line">      result.push(v);</div><div class="line">    &#125;</div><div class="line">  &#125;)</div><div class="line">  <span class="keyword">return</span> result;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="built_in">Array</span>.prototype.unique = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> json = &#123;&#125;;</div><div class="line">  <span class="keyword">var</span> result = [];</div><div class="line">  <span class="keyword">this</span>.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> type = <span class="built_in">Object</span>.prototype.toString.call(value).match(<span class="regexp">/\s(\w+)/</span>)[<span class="number">1</span>].toLowerCase();</div><div class="line">    <span class="keyword">if</span>(!((type + <span class="string">'-'</span>+value) <span class="keyword">in</span> json))&#123;</div><div class="line">      json[type + <span class="string">'-'</span>+value] = <span class="literal">true</span>;</div><div class="line">      result.push(value);</div><div class="line">    &#125;</div><div class="line">  &#125;)</div><div class="line">  <span class="keyword">return</span> result;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">Array</span>.prototype.unique = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> sortArr = <span class="keyword">this</span>.sort(),</div><div class="line">    i = <span class="number">0</span>,</div><div class="line">    len = sortArr.length;</div><div class="line">  <span class="keyword">for</span>(; i &lt; len; i++)&#123;</div><div class="line">    <span class="keyword">if</span>(sortArr[i] === sortArr[i++])&#123;</div><div class="line">      sortArr.splice(i,<span class="number">1</span>);</div><div class="line">      i--;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> sortArr;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//filter是es5中新增的数组的一个方法。不了解的同请阅读Array.prototype.filter()</span></div><div class="line"></div><div class="line"><span class="built_in">Array</span>.prototype.unique = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> sortArr = <span class="keyword">this</span>.sort();</div><div class="line">  <span class="keyword">return</span> sortArr.filter(<span class="function"><span class="keyword">function</span>(<span class="params">v,i,context</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> v !== context[i+<span class="number">1</span>];</div><div class="line">  &#125;)</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">var</span> sortArr = <span class="keyword">this</span>.sort(), result = [];</div><div class="line">  sortArr.reduce(<span class="function">(<span class="params">v1,v2</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">if</span>(v1 !== v2)&#123;</div><div class="line">      result.push(v1);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> v2;</div><div class="line">  &#125;)</div><div class="line">  result.push(sortArr[sortArr.length - <span class="number">1</span>]);</div><div class="line">  <span class="keyword">return</span> result;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="生成任意长度的随机字符"><a href="#生成任意长度的随机字符" class="headerlink" title="生成任意长度的随机字符"></a>生成任意长度的随机字符</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getRandomStr</span>(<span class="params">len</span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> text = <span class="string">""</span>;</div><div class="line">            <span class="keyword">var</span> possible = <span class="string">"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"</span>;</div><div class="line">            <span class="keyword">for</span>( <span class="keyword">var</span> i=<span class="number">0</span>; i &lt; len; i++ )</div><div class="line">                text += possible.charAt(<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * possible.length));</div><div class="line">            <span class="keyword">return</span> text;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">var</span>  aaa = getRandomStr(<span class="number">10000</span>);</div><div class="line"><span class="built_in">console</span>.log(aaa);</div><div class="line"><span class="string">``</span><span class="string">` </span></div><div class="line">&gt; ps 可以采用es6 string.repeat() 模拟 也可以使用mockjs来模拟 express充当服务器也可以用来模拟</div><div class="line"></div><div class="line">### 浏览器UA </div><div class="line">`<span class="string">``</span>javascript</div><div class="line"><span class="keyword">var</span> browser = &#123;</div><div class="line">    <span class="attr">versions</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> u = navigator.userAgent,</div><div class="line">            app = navigator.appVersion;</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">            <span class="comment">//移动终端浏览器版本信息             </span></div><div class="line">            trident: u.indexOf(<span class="string">'Trident'</span>) &gt; <span class="number">-1</span>, <span class="comment">//IE内核             </span></div><div class="line">            presto: u.indexOf(<span class="string">'Presto'</span>) &gt; <span class="number">-1</span>, <span class="comment">//opera内核             </span></div><div class="line">            webKit: u.indexOf(<span class="string">'AppleWebKit'</span>) &gt; <span class="number">-1</span>, <span class="comment">//苹果、谷歌内核             </span></div><div class="line">            gecko: u.indexOf(<span class="string">'Gecko'</span>) &gt; <span class="number">-1</span> &amp;&amp; u.indexOf(<span class="string">'KHTML'</span>) == <span class="number">-1</span>, <span class="comment">//火狐内核             </span></div><div class="line">            mobile: !!u.match(<span class="regexp">/AppleWebKit.*Mobile.*/</span>), <span class="comment">//是否为移动终端             </span></div><div class="line">            ios: !!u.match(<span class="regexp">/\(i[^;]+;( U;)? CPU.+Mac OS X/</span>), <span class="comment">//ios终端             </span></div><div class="line">            android: u.indexOf(<span class="string">'Android'</span>) &gt; <span class="number">-1</span> || u.indexOf(<span class="string">'Linux'</span>) &gt; <span class="number">-1</span>, <span class="comment">//android终端或uc浏览器             </span></div><div class="line">            iPhone: u.indexOf(<span class="string">'iPhone'</span>) &gt; <span class="number">-1</span>, <span class="comment">//是否为iPhone或者QQHD浏览器             </span></div><div class="line">            iPad: u.indexOf(<span class="string">'iPad'</span>) &gt; <span class="number">-1</span>, <span class="comment">//是否iPad             </span></div><div class="line">            webApp: u.indexOf(<span class="string">'Safari'</span>) == <span class="number">-1</span> <span class="comment">//是否web应该程序，没有头部与底部         </span></div><div class="line">        &#125;;</div><div class="line">    &#125;(),</div><div class="line">    <span class="attr">language</span>: (navigator.browserLanguage || navigator.language).toLowerCase()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="trim-ES6有"><a href="#trim-ES6有" class="headerlink" title="trim ES6有"></a>trim ES6有</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">String.prototype.trim = function() &#123;</div><div class="line">    return this.replace(/(^\s*)|(\s*$)/g, &quot;&quot;);</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">function myTrim(s) &#123;</div><div class="line">    return s.replace(/(^\s*)|(\s*$)/g, &quot;&quot;);</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<h3 id="util-非空"><a href="#util-非空" class="headerlink" title="util 非空"></a>util 非空</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//Util</span></div><div class="line"><span class="keyword">var</span> Utils = Utils || &#123;&#125;;</div><div class="line">Utils.isEmpty = <span class="function"><span class="keyword">function</span> (<span class="params">val</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> value = <span class="string">""</span> + val;</div><div class="line">    <span class="keyword">return</span> $.isEmptyObject(value) || value.trim().length === <span class="number">0</span> || $.trim(value).length === <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="mcts蒙特卡洛搜索-蒙特卡洛搜索树-人工智能"><a href="#mcts蒙特卡洛搜索-蒙特卡洛搜索树-人工智能" class="headerlink" title="mcts蒙特卡洛搜索 蒙特卡洛搜索树 人工智能"></a>mcts蒙特卡洛搜索 蒙特卡洛搜索树 人工智能</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.util.LinkedList;</div><div class="line"><span class="keyword">import</span> java.util.List;</div><div class="line"><span class="keyword">import</span> java.util.Random;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TreeNode</span> </span>&#123;</div><div class="line">    <span class="keyword">static</span> Random r = <span class="keyword">new</span> Random();</div><div class="line">    <span class="keyword">static</span> <span class="keyword">int</span> nActions = <span class="number">5</span>;</div><div class="line">    <span class="keyword">static</span> <span class="keyword">double</span> epsilon = <span class="number">1e-6</span>;</div><div class="line">    TreeNode[] children;</div><div class="line">    <span class="keyword">double</span> nVisits, totValue;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">selectAction</span><span class="params">()</span> </span>&#123;</div><div class="line">        List&lt;TreeNode&gt; visited = <span class="keyword">new</span> LinkedList&lt;TreeNode&gt;();</div><div class="line">        TreeNode cur = <span class="keyword">this</span>;</div><div class="line">        visited.add(<span class="keyword">this</span>);</div><div class="line">        <span class="keyword">while</span> (!cur.isLeaf()) &#123;</div><div class="line">            cur = cur.select();</div><div class="line">            visited.add(cur);</div><div class="line">        &#125;</div><div class="line">        cur.expand();</div><div class="line">        TreeNode newNode = cur.select();</div><div class="line">        visited.add(newNode);</div><div class="line">        <span class="keyword">double</span> value = rollOut(newNode);</div><div class="line">        <span class="keyword">for</span> (TreeNode node : visited) &#123;</div><div class="line">            <span class="comment">// would need extra logic for n-player game</span></div><div class="line">            node.updateStats(value);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">expand</span><span class="params">()</span> </span>&#123;</div><div class="line">        children = <span class="keyword">new</span> TreeNode[nActions];</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;nActions; i++) &#123;</div><div class="line">            children[i] = <span class="keyword">new</span> TreeNode();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">private</span> TreeNode <span class="title">select</span><span class="params">()</span> </span>&#123;</div><div class="line">        TreeNode selected = <span class="keyword">null</span>;</div><div class="line">        <span class="keyword">double</span> bestValue = Double.MIN_VALUE;</div><div class="line">        <span class="keyword">for</span> (TreeNode c : children) &#123;</div><div class="line">            <span class="keyword">double</span> uctValue = c.totValue / (c.nVisits + epsilon) +</div><div class="line">                       Math.sqrt(Math.log(nVisits+<span class="number">1</span>) / (c.nVisits + epsilon)) +</div><div class="line">                           r.nextDouble() * epsilon;</div><div class="line">            <span class="comment">// small random number to break ties randomly in unexpanded nodes</span></div><div class="line">            <span class="keyword">if</span> (uctValue &gt; bestValue) &#123;</div><div class="line">                selected = c;</div><div class="line">                bestValue = uctValue;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> selected;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isLeaf</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> children == <span class="keyword">null</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">rollOut</span><span class="params">(TreeNode tn)</span> </span>&#123;</div><div class="line">        <span class="comment">// ultimately a roll out will end in some value</span></div><div class="line">        <span class="comment">// assume for now that it ends in a win or a loss</span></div><div class="line">        <span class="comment">// and just return this at random</span></div><div class="line">        <span class="keyword">return</span> r.nextInt(<span class="number">2</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateStats</span><span class="params">(<span class="keyword">double</span> value)</span> </span>&#123;</div><div class="line">        nVisits++;</div><div class="line">        totValue += value;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">arity</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> children == <span class="keyword">null</span> ? <span class="number">0</span> : children.length;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>jquery ajax函数封装<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> Ajax = <span class="function"><span class="keyword">function</span>(<span class="params">url, type success, error</span>) </span>&#123;</div><div class="line">    $.ajax(&#123;</div><div class="line">        <span class="attr">url</span>: url,</div><div class="line">        <span class="attr">type</span>: type,</div><div class="line">        <span class="attr">dataType</span>: <span class="string">'json'</span>,</div><div class="line">        <span class="attr">timeout</span>: <span class="number">10000</span>,</div><div class="line">        <span class="attr">success</span>: <span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> data = d.data;</div><div class="line">            success &amp;&amp; success(data);</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">error</span>: <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</div><div class="line">            error &amp;&amp; error(e);</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">&#125;;</div><div class="line"><span class="comment">// 使用方法：</span></div><div class="line">Ajax(<span class="string">'/data.json'</span>, <span class="string">'get'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(data);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>jsonp 跨域的封装<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">jsonp</span>(<span class="params">config</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> options = config || &#123;&#125;;   <span class="comment">// 需要配置url, success, time, fail四个属性</span></div><div class="line">    <span class="keyword">var</span> callbackName = (<span class="string">'jsonp_'</span> + <span class="built_in">Math</span>.random()).replace(<span class="string">"."</span>, <span class="string">""</span>);</div><div class="line">    <span class="keyword">var</span> oHead = <span class="built_in">document</span>.getElementsByTagName(<span class="string">'head'</span>)[<span class="number">0</span>];</div><div class="line">    <span class="keyword">var</span> oScript = <span class="built_in">document</span>.createElement(<span class="string">'script'</span>);</div><div class="line">    oHead.appendChild(oScript);</div><div class="line">    <span class="built_in">window</span>[callbackName] = <span class="function"><span class="keyword">function</span>(<span class="params">json</span>) </span>&#123;  <span class="comment">//创建jsonp回调函数</span></div><div class="line">        oHead.removeChild(oScript);</div><div class="line">        clearTimeout(oScript.timer);</div><div class="line">        <span class="built_in">window</span>[callbackName] = <span class="literal">null</span>;</div><div class="line">        options.success &amp;&amp; options.success(json);   <span class="comment">//先删除script标签，实际上执行的是success函数</span></div><div class="line">    &#125;;</div><div class="line">    oScript.src = options.url + <span class="string">'?'</span> + callbackName;    <span class="comment">//发送请求</span></div><div class="line">    <span class="keyword">if</span> (options.time) &#123;  <span class="comment">//设置超时处理</span></div><div class="line">        oScript.timer = setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="built_in">window</span>[callbackName] = <span class="literal">null</span>;</div><div class="line">            oHead.removeChild(oScript);</div><div class="line">            options.fail &amp;&amp; options.fail(&#123; <span class="attr">message</span>: <span class="string">"超时"</span> &#125;);</div><div class="line">        &#125;, options.time);</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// 使用方法：</span></div><div class="line">jsonp(&#123;</div><div class="line">    <span class="attr">url</span>: <span class="string">'/b.com/b.json'</span>,</div><div class="line">    <span class="attr">success</span>: <span class="function"><span class="keyword">function</span>(<span class="params">d</span>)</span>&#123;</div><div class="line">        <span class="comment">//数据处理</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">time</span>: <span class="number">5000</span>,</div><div class="line">    <span class="attr">fail</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="comment">//错误处理</span></div><div class="line">    &#125;       </div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>常用正则表达式<br>手机号<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> validate = <span class="function"><span class="keyword">function</span>(<span class="params">num</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> exp = <span class="regexp">/^1[3-9]\d&#123;9&#125;$/</span>;</div><div class="line">    <span class="keyword">return</span> exp.test(num);</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p><a href="http://www1.w3cfuns.com/tools.php?mod=regex" target="_blank" rel="external">前端正则工具</a></p>
<h3 id="常用js函数"><a href="#常用js函数" class="headerlink" title="常用js函数"></a>常用js函数</h3><ul>
<li><p>返回顶部</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">$(<span class="built_in">window</span>).scroll(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> a = $(<span class="built_in">window</span>).scrollTop();</div><div class="line">    <span class="keyword">if</span>(a &gt; <span class="number">100</span>) &#123;</div><div class="line">        $(<span class="string">'.go-top'</span>).fadeIn();</div><div class="line">    &#125;<span class="keyword">else</span> &#123;</div><div class="line">        $(<span class="string">'.go-top'</span>).fadeOut();</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line">$(<span class="string">".go-top"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    $(<span class="string">"html,body"</span>).animate(&#123;<span class="attr">scrollTop</span>:<span class="string">"0px"</span>&#125;,<span class="string">'600'</span>);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
</li>
<li><p>阻止冒泡</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">stopBubble</span>(<span class="params">e</span>)</span>&#123;</div><div class="line">    e = e || <span class="built_in">window</span>.event;  </div><div class="line">    <span class="keyword">if</span>(e.stopPropagation)&#123;</div><div class="line">        e.stopPropagation();  <span class="comment">//W3C阻止冒泡方法  </span></div><div class="line">    &#125;<span class="keyword">else</span> &#123;  </div><div class="line">        e.cancelBubble = <span class="literal">true</span>; <span class="comment">//IE阻止冒泡方法  </span></div><div class="line">    &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>全部替换replace</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> replaceAll = <span class="function"><span class="keyword">function</span>(<span class="params">bigStr, str1, str2</span>) </span>&#123;  <span class="comment">//把bigStr中的所有str1替换为str2</span></div><div class="line">    <span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(str1, <span class="string">'gm'</span>);</div><div class="line">    <span class="keyword">return</span> bigStr.replace(reg, str2);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><p>获取浏览器url中参数的值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> getURLParam = <span class="function"><span class="keyword">function</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">decodeURIComponent</span>((<span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">'[?|&amp;]'</span> + name + <span class="string">'='</span> + <span class="string">'([^&amp;;]+?)(&amp;|#|;|$)'</span>, <span class="string">"ig"</span>).exec(location.search) || [, <span class="string">""</span>])[<span class="number">1</span>].replace(<span class="regexp">/\+/g</span>, <span class="string">'%20'</span>)) || <span class="literal">null</span>;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
</li>
<li><p>数组去重</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> unique = <span class="function"><span class="keyword">function</span>(<span class="params">arr</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> result = [], json = &#123;&#125;;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = arr.length; i &lt; len; i++)&#123;</div><div class="line">        <span class="keyword">if</span> (!json[arr[i]]) &#123;</div><div class="line">            json[arr[i]] = <span class="number">1</span>;</div><div class="line">            result.push(arr[i]);  <span class="comment">//返回没被删除的元素</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> result;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
</li>
<li><p>操作cookie</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">myObj.setCookie = <span class="function"><span class="keyword">function</span>(<span class="params">cname, cvalue, exdays</span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> d = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">    d.setTime(d.getTime() + (exdays*<span class="number">24</span>*<span class="number">60</span>*<span class="number">60</span>*<span class="number">1000</span>));</div><div class="line">    <span class="keyword">var</span> expires = <span class="string">'expires='</span>+d.toUTCString();</div><div class="line">    <span class="built_in">document</span>.cookie = cname + <span class="string">'='</span> + cvalue + <span class="string">'; '</span> + expires;</div><div class="line">&#125;;</div><div class="line">myObj.getCookie = <span class="function"><span class="keyword">function</span>(<span class="params">cname</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> name = cname + <span class="string">'='</span>;</div><div class="line">    <span class="keyword">var</span> ca = <span class="built_in">document</span>.cookie.split(<span class="string">';'</span>);</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i&lt; ca.length; i++) &#123;</div><div class="line">        <span class="keyword">var</span> c = ca[i];</div><div class="line">        <span class="keyword">while</span> (c.charAt(<span class="number">0</span>) == <span class="string">' '</span>) c = c.substring(<span class="number">1</span>);</div><div class="line">        <span class="keyword">if</span> (c.indexOf(name) != <span class="number">-1</span>) <span class="keyword">return</span> c.substring(name.length, c.length);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="string">''</span>;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><h4 id="HB-定义一些自定义空间-存放常用的方法和变量"><a href="#HB-定义一些自定义空间-存放常用的方法和变量" class="headerlink" title="HB  定义一些自定义空间  存放常用的方法和变量"></a>HB  定义一些自定义空间  存放常用的方法和变量</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//定义全局变量  通用库</span></div><div class="line"><span class="comment">//通用域名地址</span></div><div class="line"><span class="keyword">const</span> BASE_PATH = <span class="string">'//dev.m.12308.com'</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> HB = &#123;</div><div class="line">  <span class="comment">// 是否是debug 模式</span></div><div class="line">  debug : <span class="literal">false</span>,</div><div class="line">  <span class="comment">//host base</span></div><div class="line">  HOST_BASE : BASE_PATH,</div><div class="line">  <span class="comment">// success code 响应成功 code</span></div><div class="line">  PER_PAGE_CNT : <span class="number">50</span>,</div><div class="line">  <span class="attr">LOADING_TEXT</span> : <span class="string">'加载中...'</span>,</div><div class="line">  <span class="attr">SC</span> : <span class="string">'0000'</span>,</div><div class="line">  <span class="comment">// 接口访问的基本路径</span></div><div class="line">  BASE : <span class="string">'//192.168.1.120:8100'</span>,</div><div class="line">  <span class="comment">// 域名和端口</span></div><div class="line">  BAIDU_MAP_AK : <span class="string">'gOxFzMG1XwXoH8OyY7mdAnMdf6EKsPSt'</span>,</div><div class="line">  <span class="comment">// 配置的URL 跳转地址</span></div><div class="line">  URL : &#123;</div><div class="line">    <span class="comment">// 活动中心地址</span></div><div class="line">    HOME_NOTICE_URL : BASE_PATH + <span class="string">"/user/busTicket/activity"</span>,</div><div class="line">    <span class="comment">// 订单列表 地址</span></div><div class="line">    HOME_ORDER_URL : BASE_PATH + <span class="string">'/user/busTicket/orderList'</span>,</div><div class="line">    <span class="comment">// 个人中心 地址</span></div><div class="line">    HOME_USER_URL : BASE_PATH + <span class="string">'/user/busTicket/personal'</span>,</div><div class="line">    <span class="comment">// 登录的项目地址</span></div><div class="line">    LOGIN_URL : BASE_PATH + <span class="string">"/user/login"</span>,</div><div class="line">    <span class="comment">// 跳转到登录页面并重定向当前页</span></div><div class="line">    LOGIN_URL_REDIRECT : BASE_PATH + <span class="string">"/user/login?redirectURL="</span> + <span class="built_in">encodeURIComponent</span>(<span class="built_in">window</span>.location.href),</div><div class="line">    <span class="comment">//火车票的项目地址</span></div><div class="line">    HOME_TRAIN:<span class="string">"//dev.m.12308.com/train"</span>,</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">COMMON</span>:&#123;</div><div class="line">    <span class="attr">PAY_URL</span> : <span class="string">''</span>,</div><div class="line">  &#125;,</div><div class="line">  <span class="comment">//正则验证库</span></div><div class="line">  R:&#123;</div><div class="line">    <span class="attr">MOBILE</span>:<span class="regexp">/0?(13|14|15|18)[0-9]&#123;9&#125;/</span>,</div><div class="line">  &#125;,</div><div class="line">  <span class="comment">//方法库</span></div><div class="line">  M:&#123;</div><div class="line">    <span class="attr">getCookie</span>: <span class="function"><span class="keyword">function</span>(<span class="params">c_name</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (<span class="built_in">document</span>.cookie.length &gt; <span class="number">0</span>) &#123;</div><div class="line">      <span class="keyword">var</span> c_start = <span class="built_in">document</span>.cookie.indexOf(c_name + <span class="string">"="</span>);</div><div class="line">      <span class="keyword">if</span> (c_start != <span class="number">-1</span>) &#123;</div><div class="line">        c_start = c_start + c_name.length + <span class="number">1</span>;</div><div class="line">        <span class="keyword">var</span> c_end = <span class="built_in">document</span>.cookie.indexOf(<span class="string">";"</span>, c_start);</div><div class="line">        <span class="keyword">if</span> (c_end == <span class="number">-1</span>) &#123;</div><div class="line">          c_end = <span class="built_in">document</span>.cookie.length</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="built_in">unescape</span>(<span class="built_in">document</span>.cookie.substring(c_start, c_end))</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="string">""</span></div><div class="line">   &#125;,</div><div class="line">    <span class="attr">setCookie</span>: <span class="function"><span class="keyword">function</span>(<span class="params">c_name, value, expiredays</span>) </span>&#123;</div><div class="line">      <span class="keyword">var</span> exdate = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">      exdate.setDate(exdate.getDate() + expiredays);</div><div class="line">      <span class="built_in">document</span>.cookie = c_name + <span class="string">"="</span> + <span class="built_in">escape</span>(value) + ((expiredays == <span class="literal">null</span>) ? <span class="string">""</span> : <span class="string">";expires="</span> + exdate.toGMTString() + <span class="string">";path=/;"</span>)</div><div class="line">    &#125;,</div><div class="line">    <span class="comment">//</span></div><div class="line">    test:<span class="function"><span class="keyword">function</span>(<span class="params">str,val</span>)</span>&#123;</div><div class="line">      <span class="keyword">var</span> regex = <span class="keyword">new</span> <span class="built_in">RegExp</span>(str);</div><div class="line">      <span class="keyword">return</span>  regex.test(val);</div><div class="line">    &#125;,</div><div class="line">    <span class="comment">// 加载百度地图</span></div><div class="line">    loadBaiduJScript:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="built_in">console</span>.log(<span class="string">"loadBaiduJScript"</span>);</div><div class="line">      <span class="keyword">var</span> script = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>);</div><div class="line">      script.type = <span class="string">"text/javascript"</span>;</div><div class="line">      script.async = <span class="string">"async"</span>;</div><div class="line">      script.src = <span class="string">"http://api.map.baidu.com/api?v=2.0&amp;ak=vi1EKp70TLnDmSajXQ3NOxldE58nO828&amp;callback=init"</span>;</div><div class="line">      <span class="built_in">document</span>.body.appendChild(script);</div><div class="line">    &#125;,</div><div class="line">    <span class="comment">// 获取 手机号</span></div><div class="line">    getCurrentUserPhone: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="keyword">let</span> userInfo = localStorage.getItem(<span class="string">"myInfor"</span>);</div><div class="line">      <span class="keyword">let</span> userPhone = <span class="string">''</span>;</div><div class="line">      <span class="keyword">if</span> (userInfo != <span class="literal">null</span> &amp;&amp; userInfo.length &gt; <span class="number">0</span>) &#123;</div><div class="line">        userPhone = <span class="built_in">JSON</span>.parse(userInfo).userName;</div><div class="line">      &#125;</div><div class="line">      <span class="keyword">return</span> userPhone;</div><div class="line">    &#125;,</div><div class="line">    <span class="comment">// 获取 authToken</span></div><div class="line">    getCurrentAuthToken: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="keyword">let</span> auth = localStorage.getItem(<span class="string">"authToken"</span>);</div><div class="line">      <span class="keyword">let</span> result = <span class="string">''</span>;</div><div class="line">      <span class="keyword">if</span> (auth != <span class="literal">null</span> &amp;&amp; auth.length &gt; <span class="number">0</span> &amp;&amp; auth != <span class="string">'undefined'</span>) &#123;</div><div class="line">        result = auth;</div><div class="line">      &#125;</div><div class="line">      <span class="keyword">return</span> result;</div><div class="line">    &#125;,</div><div class="line">    <span class="comment">// wx or h5</span></div><div class="line">    getChannel: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="keyword">let</span> ua = <span class="built_in">window</span>.navigator.userAgent.toLowerCase();</div><div class="line">      <span class="keyword">let</span> result = <span class="string">'h5'</span>;</div><div class="line">      <span class="keyword">if</span> (ua != <span class="literal">null</span> &amp;&amp; ua.indexOf(<span class="string">'micromessenger'</span>) &gt; <span class="number">-1</span>) &#123;</div><div class="line">        result = <span class="string">'wx'</span>;</div><div class="line">      &#125;</div><div class="line">      <span class="keyword">return</span> result;</div><div class="line">    &#125;,</div><div class="line">    <span class="comment">// 是否是空 空对象 空串(包含trim后为空的串) 空数组  均返回TRUE 其他返回false </span></div><div class="line">    isEmpty : <span class="function"><span class="keyword">function</span>(<span class="params">obj</span>) </span>&#123;</div><div class="line">      <span class="keyword">if</span> (obj == <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">      <span class="keyword">if</span> (<span class="keyword">typeof</span> obj=== <span class="string">'string'</span> &amp;&amp; obj.trim().length === <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">      <span class="keyword">if</span> (<span class="keyword">typeof</span> obj === <span class="string">'object'</span> &amp;&amp; <span class="built_in">Object</span>.keys(obj).length === <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">      <span class="keyword">if</span> (obj.hasOwnProperty(<span class="string">'length'</span>) &amp;&amp; obj.length === <span class="number">0</span>)  <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">    &#125;</div><div class="line">  &#125;,</div><div class="line">  <span class="comment">// Toast:Toast,</span></div><div class="line">  toast:HbToast</div><div class="line">&#125;</div><div class="line"><span class="built_in">window</span>.HB = HB;</div></pre></td></tr></table></figure>]]></content>
      
        
        <tags>
            
            <tag> 技术文章 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[vue组件]]></title>
      <url>/blog/2017/07/17/vue%E7%BB%84%E4%BB%B6/</url>
      <content type="html"><![CDATA[<p>常常会使用到vue封装的各种组件 今天就推荐下</p>
<ul>
<li>NProgress 浏览器顶部加载进度条<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"> <span class="comment">//base</span></div><div class="line"> <span class="comment">// npm i nprogress -S</span></div><div class="line"><span class="keyword">import</span> NProgress <span class="keyword">from</span> <span class="string">'nprogress'</span> <span class="comment">// progress</span></div><div class="line"><span class="keyword">import</span> <span class="string">'nprogress/nprogress.css'</span>;<span class="comment">// Progress 进度条 样式</span></div><div class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">'./router/'</span></div><div class="line"></div><div class="line">Vue.use(ElementUI)</div><div class="line">Vue.use(router);</div><div class="line">router.beforeEach(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</div><div class="line">  NProgress.start(); </div><div class="line">  next();</div><div class="line">&#125;);</div><div class="line"></div><div class="line">router.afterEach(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">  NProgress.done(); <span class="comment">// 结束Progress</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="favicon-webpack中的配置"><a href="#favicon-webpack中的配置" class="headerlink" title="favicon webpack中的配置"></a>favicon webpack中的配置</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> resolve = <span class="built_in">require</span>(<span class="string">'path'</span>).resolve;</div><div class="line"></div><div class="line"><span class="comment">// webpack.config.js</span></div><div class="line">    plugins: [</div><div class="line">        <span class="keyword">new</span> webpack.optimize.CommonsChunkPlugin(&#123;</div><div class="line">            <span class="attr">names</span>: [<span class="string">'vendor'</span>, <span class="string">'manifest'</span>],</div><div class="line">            <span class="attr">minChunks</span>: <span class="number">3</span>,</div><div class="line">        &#125;),</div><div class="line">        <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</div><div class="line">            <span class="attr">template</span>: <span class="string">'src/index.html'</span>,</div><div class="line">            <span class="comment">// 关键代码</span></div><div class="line">            favicon: resolve(<span class="string">'./src/favicon.ico'</span>)</div><div class="line">        &#125;)</div><div class="line">    ],</div></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// vue源码</span></div><div class="line"><span class="keyword">var</span> isIOS = UA &amp;&amp; <span class="regexp">/iphone|ipad|ipod|ios/</span>.test(UA);</div><div class="line"><span class="keyword">var</span> isChrome = UA &amp;&amp; <span class="regexp">/chrome\/\d+/</span>.test(UA) &amp;&amp; !isEdge;</div></pre></td></tr></table></figure>
<h3 id="tree-shaking-尽量使用-import-as-XX-from-39-js-modules-39-来引入模块-配合webpack2-0-的tree-shaking-能实现代码有效体积减少"><a href="#tree-shaking-尽量使用-import-as-XX-from-39-js-modules-39-来引入模块-配合webpack2-0-的tree-shaking-能实现代码有效体积减少" class="headerlink" title="tree-shaking   尽量使用 import  * as  XX from &#39;js_modules&#39; 来引入模块 配合webpack2.0 的tree-shaking 能实现代码有效体积减少"></a>tree-shaking   尽量使用 <code>import  * as  XX from &#39;js_modules&#39;</code> 来引入模块 配合webpack2.0 的tree-shaking 能实现代码有效体积减少</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span>）用<span class="keyword">import</span>/<span class="keyword">export</span>来改造代码，这是tree-shaking的基础，ES6的模块支持继承，可以正确执行tree-shaking。</div><div class="line"></div><div class="line"><span class="number">2</span>）webpack的打包非压缩的情况下会保留unused <span class="function"><span class="keyword">function</span>，压缩版才会真正去掉。</span></div><div class="line"></div><div class="line">3）尽量使用<span class="title">import</span> * <span class="title">as</span> <span class="title">uu</span> <span class="title">from</span> './<span class="title">invoke</span>.<span class="title">js</span>'隐式语法而无须使用<span class="title">import</span> &#123;ddd&#125; <span class="keyword">from</span> <span class="string">'./invoke.js'</span>这种显式语法。</div><div class="line"></div><div class="line"><span class="number">4</span>）我们的业务接入tree-shaking特性后，代码体积有减少<span class="number">30</span>%。</div><div class="line"></div><div class="line">作者：码匠之心</div><div class="line">链接：http:<span class="comment">//www.jianshu.com/p/7bd8d5e87965</span></div><div class="line">來源：简书</div><div class="line">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</div></pre></td></tr></table></figure>
<p>// .babelrc<br><a href="http://www.jianshu.com/p/7bd8d5e87965" target="_blank" rel="external">参考bable</a><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// .babelrc的配置推荐使用babel-preset-env，这是目前最新的解决方案，会非常灵活的通过参数指定来兼容当前的环境。    </span></div><div class="line">&#123;</div><div class="line">  <span class="string">"presets"</span>: [</div><div class="line">    [<span class="string">"env"</span>, &#123;</div><div class="line">      <span class="string">"target"</span>: &#123;</div><div class="line">        <span class="string">"browsers"</span>: [<span class="string">"ios &gt; 7"</span>, <span class="string">"android &gt;= 4"</span>]</div><div class="line">      &#125;,</div><div class="line">      <span class="string">"modules"</span>: <span class="literal">false</span></div><div class="line">    &#125;]</div><div class="line">  ]</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
]]></content>
      
        
        <tags>
            
            <tag> 技术文章 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[跨域问题]]></title>
      <url>/blog/2017/06/30/%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98/</url>
      <content type="html"><![CDATA[<h2 id="跨域问题"><a href="#跨域问题" class="headerlink" title="跨域问题"></a>跨域问题</h2><p>跨域访问是前后端开发中常常遇到的问题 采用cors或部署的时候使用nginx反向代理都是可以解决跨域访问的问题的</p>
<h3 id="node-express-解决跨域"><a href="#node-express-解决跨域" class="headerlink" title="node+express 解决跨域"></a>node+express 解决跨域</h3><p>vue-resource代码(其实就是ajax技术)：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">this</span>.$http.get(&#123;<span class="attr">url</span>:<span class="string">"http://localhost:3000/getdata"</span>&#125;)</div><div class="line">.then(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(data)</div><div class="line">&#125;,<span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;&#125;);</div><div class="line"><span class="string">``</span><span class="string">`    </span></div><div class="line">nodejs部分：    </div><div class="line">`<span class="string">``</span>js</div><div class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</div><div class="line"><span class="keyword">var</span> app = express();</div><div class="line"><span class="comment">//设置跨域访问 控制好响应头</span></div><div class="line">app.all(<span class="string">'*'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res, next</span>) </span>&#123;</div><div class="line">    res.header(<span class="string">"Access-Control-Allow-Origin"</span>, <span class="string">"*"</span>);</div><div class="line">    res.header(<span class="string">"Access-Control-Allow-Headers"</span>, <span class="string">"X-Requested-With"</span>);</div><div class="line">    res.header(<span class="string">"Access-Control-Allow-Methods"</span>,<span class="string">"PUT,POST,GET,DELETE,OPTIONS"</span>);</div><div class="line">    res.header(<span class="string">"X-Powered-By"</span>,<span class="string">' 3.2.1'</span>)</div><div class="line">    res.header(<span class="string">"Content-Type"</span>, <span class="string">"application/json;charset=utf-8"</span>);</div><div class="line">    next();</div><div class="line">&#125;);</div><div class="line"></div><div class="line">app.get(<span class="string">'/getdata'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</div><div class="line">    res.send(&#123;<span class="attr">id</span>:req.params.id, <span class="attr">name</span>: req.params.password&#125;);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">app.listen(<span class="number">3000</span>);</div><div class="line"><span class="built_in">console</span>.log(<span class="string">'Listening on port 3000...'</span>);</div></pre></td></tr></table></figure></p>
<h3 id="http-proxy-middleware-解决跨域问题-只能在开发环境中使用"><a href="#http-proxy-middleware-解决跨域问题-只能在开发环境中使用" class="headerlink" title="http-proxy-middleware 解决跨域问题 只能在开发环境中使用"></a>http-proxy-middleware 解决跨域问题 只能在开发环境中使用</h3><p>proxyTable: {<br>  ‘/list’: {<br>    target: ‘<a href="http://api.xxxxxxxx.com" target="_blank" rel="external">http://api.xxxxxxxx.com</a>‘,<br>    changeOrigin: true,<br>    pathRewrite: {<br>      ‘^/list’: ‘’<br>    }<br>  }<br>}<br>vue-cli的这个设置来自于其使用的插件http-proxy-middleware<br>github：<a href="https://github.com/chimurai/http-proxy-middleware" target="_blank" rel="external">https://github.com/chimurai/http-proxy-middleware</a><br>深入了解的话可以看该插件配置说明，似乎还支持websocket，很强大的插件。</p>
<h3 id="webpack-dev-server-设置代理解决跨域问题-只能在开发环境中使用"><a href="#webpack-dev-server-设置代理解决跨域问题-只能在开发环境中使用" class="headerlink" title="webpack-dev-server 设置代理解决跨域问题 只能在开发环境中使用"></a>webpack-dev-server 设置代理解决跨域问题 只能在开发环境中使用</h3><p>详解见webpack的配置 (webpack-dev-server配置)[<a href="https://doc.webpack-china.org/configuration/dev-server/" target="_blank" rel="external">https://doc.webpack-china.org/configuration/dev-server/</a>]<br>webpack-dev-server 设置代理 <a href="http://www.jianshu.com/p/3bdff821f859" target="_blank" rel="external">http://www.jianshu.com/p/3bdff821f859</a><br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//webpack 中dev-server设置带来 解决跨域问题</span></div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line"> ...此处省略一万字</div><div class="line"></div><div class="line"> <span class="comment">// webpack-dev-server的配置</span></div><div class="line"> devServer: &#123;</div><div class="line"> <span class="attr">historyApiFallback</span>: <span class="literal">true</span>,</div><div class="line"> <span class="attr">hot</span>: <span class="literal">true</span>,</div><div class="line"> <span class="attr">inline</span>: <span class="literal">true</span>,</div><div class="line"> <span class="attr">progress</span>: <span class="literal">true</span>,</div><div class="line"> <span class="attr">port</span>: <span class="number">3000</span>,</div><div class="line"> <span class="attr">host</span>: <span class="string">'10.0.0.9'</span>,</div><div class="line"> <span class="attr">proxy</span>: &#123;</div><div class="line"> <span class="string">'/test/*'</span>: &#123;</div><div class="line">     <span class="attr">target</span>: <span class="string">'http://localhost'</span>,</div><div class="line">     <span class="attr">changeOrigin</span>: <span class="literal">true</span>,</div><div class="line">     <span class="attr">secure</span>: <span class="literal">false</span></div><div class="line">    &#125;</div><div class="line"> &#125;</div><div class="line"> &#125;,</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<h3 id="nginx-设置代理-解决跨域问题"><a href="#nginx-设置代理-解决跨域问题" class="headerlink" title="nginx 设置代理 解决跨域问题"></a>nginx 设置代理 解决跨域问题</h3><p>常用实例 采用nginx反向代理来解决跨域问题<br><figure class="highlight nginx"><figcaption><span>js</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">location</span> /api &#123;</div><div class="line">  <span class="attribute">rewrite</span> <span class="regexp"> ^.+apis/?(.*)$</span> /<span class="variable">$1</span> <span class="literal">break</span>;</div><div class="line">  <span class="attribute">include</span>  uwsgi_params;</div><div class="line">  <span class="attribute">proxy_pass</span>   http://localhost:1894;</div><div class="line"> &#125;</div></pre></td></tr></table></figure></p>
<p>eg 开发中常用 </p>
<p>配置<code>localhost</code><br>使用 localhost  127.0.0.1 本地IP都可以进行访问</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"> server &#123;</div><div class="line">        listen       80;</div><div class="line">        server_name  localhsot;</div><div class="line">        #charset koi8-r;</div><div class="line"></div><div class="line">        #access_log  logs/host.access.log  main;</div><div class="line"></div><div class="line">        location / &#123;</div><div class="line">          ### 配置成本地webpack打包生成的路径</div><div class="line">          root    D:/infore/infore-web/dist/;</div><div class="line">          index  index.html index.htm;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        location /api &#123;</div><div class="line">            ### 接口代理请求地址</div><div class="line">            proxy_pass http://192.168.31.52:8089/api;</div><div class="line">            proxy_redirect off;</div><div class="line">            proxy_set_header X-Real-IP $remote_addr;</div><div class="line">            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</div><div class="line">            # proxy_cookie_path /disconf /api;</div><div class="line">            # proxy_set_header   Cookie $http_cookie;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">###</div></pre></td></tr></table></figure>]]></content>
      
        
        <tags>
            
            <tag> 技术文章 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[小知识点集汇二]]></title>
      <url>/blog/2017/06/17/%E5%B0%8F%E7%9F%A5%E8%AF%86%E7%82%B9%E9%9B%86%E6%B1%87%E4%BA%8C/</url>
      <content type="html"><![CDATA[<h2 id="小知识点集汇二"><a href="#小知识点集汇二" class="headerlink" title="小知识点集汇二"></a>小知识点集汇二</h2><h3 id="短网址生成"><a href="#短网址生成" class="headerlink" title="短网址生成"></a>短网址生成</h3><p>微信等部分网址不支持中文路径的识别 可以采用短网址生成器来生成新的短网址坐map映射</p>
<blockquote>
<p><a href="http://dwz.cn/" target="_blank" rel="external">http://dwz.cn/</a> 百度短网址生成地址 还要对应api可以对接</p>
</blockquote>
<h3 id="地图慧-直接利用数据-结合地图-生成相对应的表格"><a href="#地图慧-直接利用数据-结合地图-生成相对应的表格" class="headerlink" title="地图慧  直接利用数据 结合地图 生成相对应的表格"></a>地图慧  直接利用数据 结合地图 生成相对应的表格</h3><p><a href="http://c.dituhui.com/" target="_blank" rel="external">http://c.dituhui.com/</a></p>
<h3 id="TWaver-HTML5-3D-商用软件-3D立体展示解决方案"><a href="#TWaver-HTML5-3D-商用软件-3D立体展示解决方案" class="headerlink" title="TWaver HTML5 3D 商用软件 3D立体展示解决方案"></a>TWaver HTML5 3D 商用软件 3D立体展示解决方案</h3><p><a href="http://www.servasoft.com" target="_blank" rel="external">http://www.servasoft.com</a></p>
<h3 id="YML-配置文件的书写"><a href="#YML-配置文件的书写" class="headerlink" title="YML 配置文件的书写"></a>YML 配置文件的书写</h3><p><a href="http://www.ruanyifeng.com/blog/2016/07/yaml.html?f=tt" target="_blank" rel="external">阮一峰YAML教程</a></p>
<h3 id="for-in-遍历对象的属性"><a href="#for-in-遍历对象的属性" class="headerlink" title="for ... in 遍历对象的属性"></a><code>for ... in</code> 遍历对象的属性</h3><p><code>for ... of</code> 遍历数组<br><code>Array.forEach(value, index,orgDataArray)</code> 遍历</p>
<h3 id="cdn网站推荐-https-cdnjs-com"><a href="#cdn网站推荐-https-cdnjs-com" class="headerlink" title="cdn网站推荐 https://cdnjs.com/"></a>cdn网站推荐 <a href="https://cdnjs.com/" target="_blank" rel="external">https://cdnjs.com/</a></h3><p>当然，用别人的 CDN 都是不保险的，所以建议在 CDN 读取失败的时候从自己服务器提供：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&lt;script src=<span class="string">"//http://lib.sinaapp.com/js/jquery/1.7.2/jquery.min.js"</span>&gt;&lt;/script&gt;&lt;script&gt;   </div><div class="line">if (!window.jQuery) &#123;    </div><div class="line">  var script = document.createElement('script');    </div><div class="line">  script.src = "/js/jquery.min.js";    document.body.appendChild(script);</div><div class="line">&#125;</div><div class="line">&lt;/script&gt;</div><div class="line"></div><div class="line">作者：顾轶灵</div><div class="line">链接：https:<span class="comment">//www.zhihu.com/question/20227463/answer/14403302</span></div><div class="line">来源：知乎</div><div class="line">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</div></pre></td></tr></table></figure>
<h3 id="关于路基-网页路径-最好是写成相对路径"><a href="#关于路基-网页路径-最好是写成相对路径" class="headerlink" title="关于路基 网页路径 最好是写成相对路径"></a>关于路基 网页路径 最好是写成相对路径</h3><p>资源加载 https 和 http  或其他默认协议<br><code>http://cdnjs.com/xxx.js</code> 错<br><code>//cdnjs.com/xxx.js</code>   对</p>
<p><code>/assets/img/xxx.jpg</code>  绝对路径 采用/ 标识根路径 不推荐<br><code>./assets/img/xxx/jpg</code>  推荐 <code>./</code>当前同级目录  <code>../</code>上级目录 <code>./xxx/</code> 多级目录</p>
<h3 id="js中-记住-2点关于函数和变量声明"><a href="#js中-记住-2点关于函数和变量声明" class="headerlink" title="js中 记住 2点关于函数和变量声明"></a>js中 记住 2点关于函数和变量声明</h3><ul>
<li>函数和变量声明提前 </li>
<li>函数声明优先于变量声明 </li>
</ul>
]]></content>
      
        
    </entry>
    
    <entry>
      <title><![CDATA[视频直播流web播放]]></title>
      <url>/blog/2017/06/17/%E8%A7%86%E9%A2%91%E7%9B%B4%E6%92%AD%E6%B5%81web%E6%92%AD%E6%94%BE/</url>
      <content type="html"><![CDATA[<h1 id="视频直播放映解决方案"><a href="#视频直播放映解决方案" class="headerlink" title="视频直播放映解决方案"></a>视频直播放映解决方案</h1><h4 id="分为PC-web端和移动web端"><a href="#分为PC-web端和移动web端" class="headerlink" title="分为PC-web端和移动web端"></a>分为PC-web端和移动web端</h4><blockquote>
<p>pc-web端采用<a href="http://www.ckplayer.com/" target="_blank" rel="external">Ckplay播放器</a> 通过RTMP协议 传输视频流<br>mobile-web端采用h5 <code>video</code>标签 通过HLS 传输视频流</p>
</blockquote>
<h4 id="核心代码示例"><a href="#核心代码示例" class="headerlink" title="核心代码示例"></a>核心代码示例</h4><ul>
<li>pc-web端 ckplayer</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!--pc-web端 ckplayer--&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"a1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"ckplayer/ckplayer.js"</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"></span></div><div class="line">	<span class="keyword">var</span> flashvars=&#123;</div><div class="line">    <span class="comment">//配置视频地址</span></div><div class="line">		f:<span class="string">'rtmp://192.168.31.31:1935/live/stream'</span>,</div><div class="line">		<span class="attr">c</span>:<span class="number">0</span>,</div><div class="line">		<span class="attr">b</span>:<span class="number">1</span>,</div><div class="line">    <span class="comment">//配置封面</span></div><div class="line">		i:<span class="string">'http://www.ckplayer.com/static/images/cqdw.jpg'</span></div><div class="line">		&#125;;</div><div class="line">    <span class="comment">// 具体配置 参考和查看 [http://www.ckplayer.com/tool/flashvars.htm](http://www.ckplayer.com/tool/flashvars.htm)</span></div><div class="line">	<span class="keyword">var</span> params=&#123;<span class="attr">bgcolor</span>:<span class="string">'#FFF'</span>,<span class="attr">allowFullScreen</span>:<span class="literal">true</span>,<span class="attr">allowScriptAccess</span>:<span class="string">'always'</span>,<span class="attr">wmode</span>:<span class="string">'transparent'</span>&#125;;</div><div class="line">	CKobject.embedSWF(<span class="string">'ckplayer/ckplayer.swf'</span>,<span class="string">'a1'</span>,<span class="string">'ckplayer_a1'</span>,<span class="string">'600'</span>,<span class="string">'400'</span>,flashvars,params);</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<ul>
<li>mobile-web 端[HTML5 player]<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">video</span> <span class="attr">controls</span> <span class="attr">autoplay</span> <span class="attr">webkit-playsinline</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">"http://192.168.31.31:9090/live/stream.m3u8"</span> <span class="attr">type</span>=<span class="string">"application/vnd.apple.mpegurl"</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"warin"</span>&gt;</span>Your browser does not support HTML5 video<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">video</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
]]></content>
      
        
        <tags>
            
            <tag> 技术文章 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[github个人博客]]></title>
      <url>/blog/2017/06/15/github%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/</url>
      <content type="html"><![CDATA[<p>  今天把博客弄到github上,计划以后再github上面写文章 学习笔记 图片等 300M的空间 也应该够了</p>
]]></content>
      
        
        <tags>
            
            <tag> 我 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[小知识]]></title>
      <url>/blog/2017/06/14/%E5%B0%8F%E7%9F%A5%E8%AF%86/</url>
      <content type="html"><![CDATA[<h4 id="vue-spa-滚动行为的保存-需要启用history模式-参看https-router-vuejs-org-zh-cn-advanced-scroll-behavior-html"><a href="#vue-spa-滚动行为的保存-需要启用history模式-参看https-router-vuejs-org-zh-cn-advanced-scroll-behavior-html" class="headerlink" title="vue spa 滚动行为的保存 需要启用history模式 参看https://router.vuejs.org/zh-cn/advanced/scroll-behavior.html"></a>vue spa 滚动行为的保存 需要启用history模式 参看<a href="https://router.vuejs.org/zh-cn/advanced/scroll-behavior.html" target="_blank" rel="external">https://router.vuejs.org/zh-cn/advanced/scroll-behavior.html</a></h4><h4 id="flex布局-flex布局的兼容性-部分需要添加-webkit前缀"><a href="#flex布局-flex布局的兼容性-部分需要添加-webkit前缀" class="headerlink" title="flex布局 flex布局的兼容性 部分需要添加 -webkit前缀"></a>flex布局 flex布局的兼容性 部分需要添加 <code>-webkit</code>前缀</h4><blockquote>
<p>理清 主轴 侧轴(和主轴垂直的)  <code>justify-content</code> 设置主轴的分布 <code>align-items</code>设置侧轴的分布</p>
</blockquote>
<h4 id="JSON-对象最后一个属性列-结尾-别用"><a href="#JSON-对象最后一个属性列-结尾-别用" class="headerlink" title="JSON 对象最后一个属性列 结尾 别用,"></a>JSON 对象最后一个属性列 结尾 别用<code>,</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> json = &#123;</div><div class="line">    <span class="string">"name"</span>:<span class="string">'张三'</span>,</div><div class="line">    <span class="string">"age"</span> : <span class="number">24</span>    <span class="comment">// ', 这里别打逗号或分号 养成好的习惯</span></div><div class="line">    </div><div class="line">&#125;</div><div class="line">最好启用 eslint来规范书写习惯</div></pre></td></tr></table></figure>
<h4 id="array-splice-slice"><a href="#array-splice-slice" class="headerlink" title="array splice slice"></a>array splice slice</h4><ul>
<li>slice 浅复制数组 slice(index, end);</li>
<li>splice 删除和添加数组元素 splice(index, count. [….add-item]);</li>
</ul>
<h4 id="国内公开API-可用来写demo-测试数据"><a href="#国内公开API-可用来写demo-测试数据" class="headerlink" title="国内公开API 可用来写demo 测试数据"></a>国内公开API 可用来写demo 测试数据</h4><p><a href="https://github.com/jokermonn/-Api/blob/master/DoubanMovie.md" target="_blank" rel="external">https://github.com/jokermonn/-Api/blob/master/DoubanMovie.md</a> </p>
]]></content>
      
        
        <tags>
            
            <tag> 技术文章 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[美图]]></title>
      <url>/blog/2017/06/14/%E7%BE%8E%E5%9B%BE/</url>
      <content type="html"><![CDATA[<h4 id="分享几张手机桌面"><a href="#分享几张手机桌面" class="headerlink" title="分享几张手机桌面"></a>分享几张手机桌面</h4><p><img src="./assets/img/001.jpg" alt="001.jpg"><br><img src="./assets/img/002.jpg" alt="002.jpg"><br><img src="./assets/img/003.jpg" alt="003.jpg"></p>
]]></content>
      
        
        <tags>
            
            <tag> 美图分享 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[nginx学习笔记]]></title>
      <url>/blog/2017/06/14/nginx%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
      <content type="html"><![CDATA[<h4 id="nginx能做什么"><a href="#nginx能做什么" class="headerlink" title="nginx能做什么"></a>nginx能做什么</h4><blockquote>
<p><a href="http://www.raye.wang/2017/02/24/quan-mian-liao-jie-nginxdao-di-neng-zuo-shi-yao/?hmsr=toutiao.io&amp;utm_medium=toutiao.io&amp;utm_source=toutiao.io" target="_blank" rel="external">全面了解Nginx主要应用场景</a></p>
<ul>
<li>反向代理</li>
<li>负载均衡 RR(默认) 权重 ip_hash  fair url_hash</li>
<li>http服务器</li>
<li>正向代理</li>
</ul>
</blockquote>
<h3 id="反向代理（ReverseProxy）就是通过代理服务器来-接受internet的连接请求-然后将请求转发给内部网络上的服务器，并将服务器上得到的结果返回给请求客户端"><a href="#反向代理（ReverseProxy）就是通过代理服务器来-接受internet的连接请求-然后将请求转发给内部网络上的服务器，并将服务器上得到的结果返回给请求客户端" class="headerlink" title="反向代理（ReverseProxy）就是通过代理服务器来 接受internet的连接请求 然后将请求转发给内部网络上的服务器，并将服务器上得到的结果返回给请求客户端"></a>反向代理（ReverseProxy）就是通过代理服务器来 接受internet的连接请求 然后将请求转发给内部网络上的服务器，并将服务器上得到的结果返回给请求客户端</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">server&#123;</div><div class="line">    listen 80;</div><div class="line">    server_name localhost;</div><div class="line">    client_max_body_size 10M;</div><div class="line">    </div><div class="line">    location / &#123;</div><div class="line">        proxy_pass http://localhost:8080;</div><div class="line">        proxy_set_header Host $host:$server_port;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">保存配置文件后重启 nginx 这样当我们访问localhost 相当于访问localhost:8080了</div></pre></td></tr></table></figure>
<p>常用实例 采用nginx反向代理来解决跨域问题</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">location /api &#123;</div><div class="line">rewrite  ^.+apis/?(.*)$ /$1 break;</div><div class="line">include  uwsgi_params;</div><div class="line">   proxy_pass   http://localhost:1894;</div><div class="line">&#125;&#125;</div></pre></td></tr></table></figure>
<p>这样 更改请求地址为 <code>/api</code> 虚拟的路径和 访问的静态页面就处于同源了<br>可以使用这样的来处理跨域问题</p>
<h3 id="负载均衡"><a href="#负载均衡" class="headerlink" title="负载均衡"></a>负载均衡</h3><p>默认按照请求顺序分配到不同的后端服务器 如果后端服务器down掉 能自己剔除<br>简单配置如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">upstream test&#123;</div><div class="line">  #  server localhost: 8081 weight=3; server localhost: 8081 weight=7; 权重</div><div class="line">  # ip_hast </div><div class="line">  # fair 按照响应时间来分配 分配时间短的优先分配 需要第三方拓展包</div><div class="line">    server localhost:8081;</div><div class="line">    server localhost:8080;</div><div class="line">&#125;</div><div class="line"></div><div class="line">server &#123;</div><div class="line">    listen 81;</div><div class="line">    server_name localhost;</div><div class="line">    client_max_body_size 1024M;</div><div class="line">    </div><div class="line">    localtion / &#123;</div><div class="line">        proxy_pass http://test;</div><div class="line">        proxy_set_header Host $host:$server_port;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    </div><div class="line">    </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>HTTP  服务器</p>
<p>eg1: 静态资源服务器<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">server &#123;</div><div class="line">    listen 80;</div><div class="line">    server_name localhost;</div><div class="line">    client_max_body_size 1024M;</div><div class="line">    </div><div class="line">    location / &#123;</div><div class="line">        root e:\wwwrooot;</div><div class="line">        index index.html;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>动静分离<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">upstream test &#123;</div><div class="line">    server localhost:8080;</div><div class="line">    server localhost:8081;</div><div class="line">&#125;</div><div class="line"></div><div class="line">server &#123;</div><div class="line">    listen 80;</div><div class="line">    server_name localhost;</div><div class="line">    </div><div class="line">    location / &#123;</div><div class="line">        root e:\wwwroot;</div><div class="line">        index index.html;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    # 所有静态请求都有nginx处理 存放目录为html</div><div class="line">    location ~ \.(gif|jpg|jpeg|png|bmp|css|js)$ &#123;</div><div class="line">        root e:\wwwroot;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    # 动态请求 交由代理服务处理</div><div class="line">    location ~ \.(jsp|do|action)$ &#123;</div><div class="line">        proxy_pass http://test;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    error_page 500 502 503 504 /50x.html</div><div class="line">    location = /50x.html &#123;</div><div class="line">        root e:\wwwroot;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>这样的话 我们可以把html 等静态资源放在文件目录下  动态的话可以 根据 localtion后面的正则 匹配到代理服务器上</p>
<h3 id="linux"><a href="#linux" class="headerlink" title="linux"></a>linux</h3><p>nginx -s reload</p>
<h3 id="window-热重启"><a href="#window-热重启" class="headerlink" title="window  热重启"></a>window  热重启</h3><p>nginx.exe -s reload</p>
<h3 id="代码示例-12308-测试环境"><a href="#代码示例-12308-测试环境" class="headerlink" title="代码示例 12308 测试环境"></a>代码示例 12308 测试环境</h3><blockquote>
<p>nginx.conf  base  通过载入  <code>/nginx_vhos/</code> 目录下的所有文件<br> <code>include /usr/local/nginx/conf/nginx_vhost/*.conf</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div></pre></td><td class="code"><pre><div class="line">[dubbo@hd-node2 conf]$ vi nginx.conf</div><div class="line"></div><div class="line">    keepalive_timeout   65;</div><div class="line">    server_tokens       off;</div><div class="line">    tcp_nopush          on;</div><div class="line"></div><div class="line">    gzip                on;</div><div class="line">    gzip_comp_level     5;</div><div class="line">    gzip_min_length     1k;</div><div class="line">    gzip_buffers        4 16k;</div><div class="line">    gzip_disable        &quot;MSIE [1-6]\.(?!.*SV1)&quot;;</div><div class="line">    gzip_types          text/plain application/x-javascript text/css application/xml text/javascript application/javascript application/json;</div><div class="line">    gzip_http_version   1.0;</div><div class="line">    gzip_vary           on;</div><div class="line"></div><div class="line">    log_format main &apos;$remote_addr $http_x_forwarded_for [$time_local] &quot;$request&quot; $status $body_bytes_sent &quot;$http_referer&quot; &quot;$http_user_agent&quot; &quot;$request_time&quot; $request_body &quot;$upstream_response_time&quot;&apos;;</div><div class="line">    access_log on;</div><div class="line">    server_names_hash_max_size    4096;</div><div class="line">&#125;</div><div class="line"></div><div class="line">http &#123;</div><div class="line">    include       /usr/local/nginx/conf/mime.types;</div><div class="line">    default_type  application/octet-stream;</div><div class="line"></div><div class="line">    sendfile            on;</div><div class="line">    output_buffers      1 128k;</div><div class="line">    log_not_found       off;</div><div class="line">    keepalive_timeout   65;</div><div class="line">    server_tokens       off;</div><div class="line">    tcp_nopush          on;</div><div class="line"></div><div class="line">    gzip                on;</div><div class="line">    gzip_comp_level     5;</div><div class="line">    gzip_min_length     1k;</div><div class="line">    gzip_buffers        4 16k;</div><div class="line">    gzip_disable        &quot;MSIE [1-6]\.(?!.*SV1)&quot;;</div><div class="line">    gzip_types          text/plain application/x-javascript text/css application/xml text/javascript application/javascript application/json;</div><div class="line">    gzip_http_version   1.0;</div><div class="line">    gzip_vary           on;</div><div class="line"></div><div class="line">    log_format main &apos;$remote_addr $http_x_forwarded_for [$time_local] &quot;$request&quot; $status $body_bytes_sent &quot;$http_referer&quot; &quot;$http_user_agent&quot; &quot;$request_time&quot; $request_body &quot;$upstream_response_time&quot;&apos;;</div><div class="line">    access_log on;</div><div class="line">    server_names_hash_max_size    4096;</div><div class="line">    server_names_hash_bucket_size 128;</div><div class="line"></div><div class="line">    client_header_buffer_size     32k;</div><div class="line">    large_client_header_buffers   4 32k;</div><div class="line">    client_max_body_size          100m;</div><div class="line"></div><div class="line">    proxy_connect_timeout         5;</div><div class="line">    proxy_read_timeout            60;</div><div class="line">    proxy_send_timeout            5;</div><div class="line">    proxy_buffer_size             16k;</div><div class="line">    proxy_buffers                 4 64k;</div><div class="line">    proxy_busy_buffers_size       128k;</div><div class="line">    proxy_temp_file_write_size    128k;</div><div class="line">    proxy_hide_header             Vary;</div><div class="line">    proxy_set_header              Accept-Encoding ”;</div><div class="line">    proxy_set_header              Host    $host;</div><div class="line">    proxy_set_header              Referer $http_referer;</div><div class="line">    proxy_set_header              Cookie  $http_cookie;</div><div class="line">    proxy_set_header              X-Real-IP  $remote_addr;</div><div class="line">    proxy_set_header              X-Forwarded-For $proxy_add_x_forwarded_for;</div><div class="line">    include /usr/local/nginx/conf/nginx_vhost/*.conf;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
</blockquote>
]]></content>
      
        
        <tags>
            
            <tag> 学习笔记 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[yarn学习笔记]]></title>
      <url>/blog/2017/06/14/yarn%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
      <content type="html"><![CDATA[<h3 id="关于yarn和npm"><a href="#关于yarn和npm" class="headerlink" title="关于yarn和npm "></a><a href="http://web.jobbole.com/88459/" target="_blank" rel="external">关于yarn和npm </a></h3><p>yarn是npm的升级版本 (新工具) yarn.lock</p>
<ul>
<li>yarn add (npm install  yarn install)</li>
<li>yarn global</li>
<li>yarn why </li>
</ul>
<p>yarn 更安全 速度更快 版本锁定 环境更统一</p>
]]></content>
      
        
        <tags>
            
            <tag> 学习笔记 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[sass学习笔记]]></title>
      <url>/blog/2017/06/14/sass%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
      <content type="html"><![CDATA[<h3 id="sass学习笔记-sass官网"><a href="#sass学习笔记-sass官网" class="headerlink" title="sass学习笔记 sass官网"></a>sass学习笔记 <a href="https://www.sass.hk/guide/" target="_blank" rel="external">sass官网</a></h3><ul>
<li>工具下载<a href="https://www.sass.hk/skill/koala-app.html" target="_blank" rel="external">下载地址</a> 工欲善其事必先利其器</li>
<li>sass 定义css变量  <code>$t = &quot;100px&quot;</code>;</li>
<li><p>sass 表示层级关系 <code>div.c1&gt;p&gt;a + h1</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">.c1 &#123;</div><div class="line">    ...</div><div class="line">    p&#123;</div><div class="line">        a&#123;</div><div class="line">           ... </div><div class="line">           &amp;:hover&#123;</div><div class="line">               ....</div><div class="line">           &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    h1&#123;</div><div class="line">        ...</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><code>$</code>定义变量 <code>&amp;</code>伪类样式</p>
</li>
<li><code>@import(url)</code> 使用@import 直接导入对应文件 和css中@import 有所不同</li>
<li><strong>混合器</strong> <code>@mixin</code> <code>@include</code> 调用混合器 目的:实现大段样式的重用。<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">// </div><div class="line">@mixin name-a&#123;</div><div class="line">    color:#212;</div><div class="line">    ....</div><div class="line">&#125;</div><div class="line"></div><div class="line">// 别的文件中复用样式</div><div class="line">.t1&#123;</div><div class="line">    ....</div><div class="line">    @include name-a;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>通过使用参数，你可以使用混合器把你样式中的通用样式抽离出来，然后轻松地在其他地方重用。</strong> 实际上，混合器太好用了，一不小心你可能会过度使用。大量的重用可能会导致生成的样式表过大，导致加载缓慢。所以，首先我们将讨论混合器的使用场景，避免滥用。</p>
<p>混合器还可以传入参数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">@mixin link-colors($normal, $hover, $visited) &#123;</div><div class="line">  color: $normal;</div><div class="line">  &amp;:hover &#123; color: $hover; &#125;</div><div class="line">  &amp;:visited &#123; color: $visited; &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">a &#123;</div><div class="line">  @include link-colors(blue, red, green);</div><div class="line">&#125;</div><div class="line"></div><div class="line">//Sass最终生成的是：</div><div class="line"></div><div class="line">a &#123; color: blue; &#125;</div><div class="line">a:hover &#123; color: red; &#125;</div><div class="line">a:visited &#123; color: green; &#125;</div></pre></td></tr></table></figure>
<p>为了在@include混合器时不必传入所有的参数，我们可以给参数指定一个默认值。参数默认值使用$name: default-value的声明形式，默认值可以是任何有效的css属性值，甚至是其他参数的引用，如下代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">@mixin link-colors(</div><div class="line">    $normal,</div><div class="line">    $hover: $normal, // 默认参数 $hover 没有传递第二个参数 采用第一个参数$normal</div><div class="line">    $visited: $normal</div><div class="line">  )</div><div class="line">&#123;</div><div class="line">  color: $normal;</div><div class="line">  &amp;:hover &#123; color: $hover; &#125;</div><div class="line">  &amp;:visited &#123; color: $visited; &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">//如果像下边这样调用：@include link-colors(red) </div><div class="line">// $hover和$visited也会被自动赋值为red。</div></pre></td></tr></table></figure></p>
<ul>
<li><strong>继承@extend</strong>  注意继承和混合之间的关系<br>混合器主要用于展示性样式的重用，而类名用于语义化样式的重用。   </li>
<li>关于<code>@extend</code>有两个要点你应该知道<br>跟混合器相比，继承生成的css代码相对更少。因为继承仅仅是重复选择器，而不会重复属性，所以使用继承往往比混合器生成的css体积更小。如果你非常关心你站点的速度，请牢记这一点。<br>继承遵从css层叠的规则。当两个不同的css规则应用到同一个html元素上时，并且这两个不同的css规则对同一属性的修饰存在不同的值，css层叠规则会决定应用哪个样式。相当直观：通常权重更高的选择器胜出，如果权重相同，定义在后边的规则胜出。 </li>
<li>但有一个前提就是，不要用后代选择器去继承。</li>
</ul>
<h3 id="sass-和-scss的区别"><a href="#sass-和-scss的区别" class="headerlink" title=".sass 和.scss的区别"></a>.sass 和.scss的区别</h3><p>区别是书写格式 .sass 采用无分号<code>;</code>和无<code>{}</code>使用缩进表示层级关系<br>.scss采用css中常用的来表示 更加容易接受 也更常用和推荐</p>
]]></content>
      
        
        <tags>
            
            <tag> 学习笔记 </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[小知识点tips]]></title>
      <url>/blog/2017/06/14/%E5%B0%8F%E7%9F%A5%E8%AF%86%E7%82%B9tips/</url>
      <content type="html"><![CDATA[<h3 id="小知识点"><a href="#小知识点" class="headerlink" title="小知识点"></a>小知识点</h3><ul>
<li><a href="https://github.com/Allenice/ohana#ch" target="_blank" rel="external">node接口模拟返回</a></li>
<li><a href="http://www.cnblogs.com/zoumiaomiao/p/4913230.html" target="_blank" rel="external">js接口模拟数据</a></li>
<li><a href="https://gold.xitu.io/entry/5828477fda2f600056dca3b6" target="_blank" rel="external">mockjs</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2015/12/a-mocha-tutorial-of-examples.html" target="_blank" rel="external">mocha js 测试框架–教程</a></li>
<li><a href="http://gold.xitu.io/post/582bd0b4da2f600063d4f89e" target="_blank" rel="external">git 教程 全面理解Git</a><blockquote>
<p><img src="http://ac-myg6wstv.clouddn.com/fea7461e85aee80bbe96.png" alt="git原理图"><br><a href="http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000" target="_blank" rel="external">git 教程</a></p>
</blockquote>
</li>
<li><a href="http://www.moye.me/2016/11/19/nightmare/" target="_blank" rel="external">爬虫的终极形态：nightmare</a></li>
<li><p><a href="https://github.com/amfe/article/issues/17" target="_blank" rel="external">移动端h5适配–flexible</a></p>
</li>
<li><p><a href="http://www.runoob.com/nodejs/nodejs-npm.html" target="_blank" rel="external">node npm等命令–初级教程</a></p>
</li>
</ul>
<h4 id="1行代码创建服务器"><a href="#1行代码创建服务器" class="headerlink" title="1行代码创建服务器"></a>1行代码创建服务器</h4><p>先全局安装http-server</p>
<ul>
<li>npm install http-server -g</li>
<li>cmd中切换到当前目录</li>
<li>运行 http-server 即可<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">npm install http-server -g</div><div class="line">切换到当前静态网页的目录 </div><div class="line">采用http-server 运行即可</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="或使用express的static新建server"><a href="#或使用express的static新建server" class="headerlink" title="或使用express的static新建server"></a>或使用express的static新建server</h4><p><a href="http://www.expressjs.com.cn/starter/static-files.html" target="_blank" rel="external">express -static–参看</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">可以使用express 快速新建express路由项目[express 应用生成器--参看](http://www.expressjs.com.cn/starter/generator.html)</div><div class="line"></div><div class="line"></div><div class="line">app.use(&apos;/s&apos;, express.static(&apos;./sta&apos;));</div></pre></td></tr></table></figure></p>
<h4 id="在浏览器-console-中执行"><a href="#在浏览器-console-中执行" class="headerlink" title="在浏览器 console 中执行"></a>在浏览器 console 中执行</h4><p><code>document.body.contentEditable=true</code>     或<br><code>document.designMode=&quot;on&quot;</code><br><strong>就可以直接修改页面上的任何文字了</strong></p>
<h4 id="自建博客HEXO"><a href="#自建博客HEXO" class="headerlink" title="自建博客HEXO"></a>自建博客HEXO</h4><p>npm 安装  <code>npm install hexo -g</code></p>
<p><a href="https://hexo.io/zh-cn/docs/commands.html" target="_blank" rel="external">hexo</a></p>
<h3 id="北邮大地址"><a href="#北邮大地址" class="headerlink" title="北邮大地址"></a>北邮大地址</h3><p><a href="http://byr.wiki/" target="_blank" rel="external">http://byr.wiki/</a></p>
<h3 id="压缩图片-图片压缩网站"><a href="#压缩图片-图片压缩网站" class="headerlink" title="压缩图片 图片压缩网站"></a>压缩图片 图片压缩网站</h3><p><a href="https://tinypng.com/" target="_blank" rel="external">https://tinypng.com/</a></p>
<h3 id="个人备注地址"><a href="#个人备注地址" class="headerlink" title="个人备注地址"></a>个人备注地址</h3><p><a href="https://zhuanlan.zhihu.com/p/23340209" target="_blank" rel="external">西部世界 s08</a></p>
<h4 id="下载youtube视频"><a href="#下载youtube视频" class="headerlink" title="下载youtube视频"></a>下载youtube视频</h4><p><a href="http://jingyan.baidu.com/article/39810a23d2deb2b637fda66c.html" target="_blank" rel="external">下载youtube</a></p>
<ul>
<li>进入 <a href="en.savefrom.net">en.savefrom.net</a> 粘贴youtube播放地址即可</li>
<li>进入<a href="http://www.clipconverter.cc/" target="_blank" rel="external">http://www.clipconverter.cc/</a></li>
</ul>
<h4 id="git-解决冲突"><a href="#git-解决冲突" class="headerlink" title="git 解决冲突"></a>git 解决冲突</h4><p>#　下载冲突到缓存区</p>
<ul>
<li>git fetch 　远程到　本地仓库</li>
<li>git rebase  本地仓库　和本地合并　　（）</li>
</ul>
<p>查找head 手动 合并 代码 </p>
<p>开始</p>
<ul>
<li>git add  add文件</li>
<li>git commit 添加</li>
<li>git pull 更新</li>
<li>git push 提交</li>
</ul>
<p>处理流程 小乌龟</p>
<ul>
<li>commit </li>
<li><ul>
<li>fetch </li>
</ul>
</li>
<li><ul>
<li>rebase </li>
</ul>
</li>
<li><ul>
<li>stash  暂存 </li>
</ul>
</li>
<li><ul>
<li>push </li>
</ul>
</li>
<li><ul>
<li>stash pop  还原</li>
</ul>
</li>
</ul>
<h4 id="自制markdown文档-docute"><a href="#自制markdown文档-docute" class="headerlink" title="自制markdown文档 docute"></a>自制markdown文档 docute</h4><p><a href="https://docute.js.org/#/home?id=introduction" target="_blank" rel="external">docute</a> <a href="https://docute.js.org/#/home?id=introduction" target="_blank" rel="external">https://docute.js.org/#/home?id=introduction</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">// quick start</div><div class="line">npm i -g docute-cli</div><div class="line"></div><div class="line">docute init ./docs</div><div class="line">docute</div></pre></td></tr></table></figure></p>
<h4 id="工具-趋势"><a href="#工具-趋势" class="headerlink" title="工具 趋势"></a>工具 趋势</h4><ul>
<li><a href="https://www.awesomes.cn/" target="_blank" rel="external">web前端趋势</a></li>
<li><a href="https://www.sdk.cn/site/index" target="_blank" rel="external">https://www.sdk.cn/site/index</a></li>
<li><a href="http://www.javascript.fun/" target="_blank" rel="external">js 框架趋势</a></li>
<li><a href="http://bestof.js.org/" target="_blank" rel="external">best of js</a></li>
<li><a href="http://f2er.club/" target="_blank" rel="external">最牛前端</a></li>
</ul>
<h4 id="自动抢红包"><a href="#自动抢红包" class="headerlink" title="自动抢红包"></a>自动抢红包</h4><p><a href="https://github.com/geeeeeeeeek/WeChatLuckyMoney" target="_blank" rel="external">自动抢红包</a></p>
<h4 id="微信小程序大全"><a href="#微信小程序大全" class="headerlink" title="微信小程序大全"></a>微信小程序大全</h4><p><a href="http://www.duba.com/wxapp/?f=mobile" target="_blank" rel="external">微信小程序导航</a><br><a href="https://minapp.com/miniapp/" target="_blank" rel="external">知晓– 微信小程序大全</a></p>
<h4 id="文件命名小写-下划线-特殊的可以采用大写-如-README"><a href="#文件命名小写-下划线-特殊的可以采用大写-如-README" class="headerlink" title="文件命名小写+ 下划线  特殊的可以采用大写 如:README"></a>文件命名小写+ 下划线  特殊的可以采用大写 如:README</h4><p><a href="http://www.ruanyifeng.com/blog/2017/02/filename-should-be-lowercase.html" target="_blank" rel="external">链接地址</a></p>
<h4 id="lt-map-id-quot-id-quot-gt-lt-img-usemap-quot-id-quot-gt-图像中的map定位"><a href="#lt-map-id-quot-id-quot-gt-lt-img-usemap-quot-id-quot-gt-图像中的map定位" class="headerlink" title="&lt;map id=&quot;id&quot;&gt; &lt;img usemap=&quot;#id&quot;&gt; 图像中的map定位"></a><code>&lt;map id=&quot;id&quot;&gt;</code> <code>&lt;img usemap=&quot;#id&quot;&gt;</code> 图像中的map定位</h4><p><img src="http://upload-images.jianshu.io/upload_images/2531512-bb3ed960f0b47a67.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"></p>
<h4 id="查询浏览器bug的网站"><a href="#查询浏览器bug的网站" class="headerlink" title="查询浏览器bug的网站"></a>查询浏览器bug的网站</h4><p><a href="https://bugs.chromium.org/p/chromium/issues/list" target="_blank" rel="external">https://bugs.chromium.org/p/chromium/issues/list</a><br><a href="http://ued.ctrip.com/blog/crash-app-by-css.html" target="_blank" rel="external">css也能让浏览器崩溃</a></p>
<h4 id="vue单页面应用打包和优化"><a href="#vue单页面应用打包和优化" class="headerlink" title="vue单页面应用打包和优化"></a>vue单页面应用打包和优化</h4><p><a href="https://shuirong.github.io/2017/05/07/Vue-SPA-%E5%8D%95%E9%A1%B5%E5%BA%94%E7%94%A8-%E9%A6%96%E5%B1%8F%E4%BC%98%E5%8C%96%E5%AE%9E%E8%B7%B5/" target="_blank" rel="external">vue单页面应用打包和优化</a></p>
<h3 id="js-substring-start-end-substr-start-length"><a href="#js-substring-start-end-substr-start-length" class="headerlink" title="js substring(start, end)  substr(start[,length])"></a>js <code>substring(start, end)</code>  <code>substr(start[,length])</code></h3><ul>
<li><code>substring</code>用于提取字符串中 介于两个指定下标的字符</li>
<li><code>substr</code> 用于返回一个指定位置开始的指定长度的字符串<br>详见 <a href="http://www.cnblogs.com/wz327/archive/2010/04/11/1709433.html" target="_blank" rel="external">http://www.cnblogs.com/wz327/archive/2010/04/11/1709433.html</a></li>
</ul>
<h3 id="关于node的版本"><a href="#关于node的版本" class="headerlink" title="关于node的版本"></a>关于node的版本</h3><p>node的版本更新常常会弃用部分API和新增API 最好使用LTS版本 项目中<br>如果科研或技术预研的话 可以采用最新版本 </p>
<h3 id="个人习惯"><a href="#个人习惯" class="headerlink" title="个人习惯"></a>个人习惯</h3><p>1.java tomcat eclise nodejs 安装到D盘<br>2.文档放在E盘<br>3.F盘是共享和备注</p>
]]></content>
      
        
        <tags>
            
            <tag> 技术文章 </tag>
            
        </tags>
        
    </entry>
    
  
  
</search>
